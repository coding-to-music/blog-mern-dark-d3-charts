(this["webpackJsonphill-chart"]=this["webpackJsonphill-chart"]||[]).push([[0],{168:function(e,t,r){},173:function(e,t,r){},174:function(e,t,r){},175:function(e,t,r){},176:function(e,t,r){},178:function(e,t,r){},179:function(e,t,r){},180:function(e,t,r){},181:function(e,t,r){},182:function(e,t,r){},183:function(e,t,r){},213:function(e,t,r){},214:function(e,t,r){},215:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),c=r(84),s=r.n(c),i=r(22),l=r(4),o=r(5),d=r(6),u=r(7),h=(r(42),r(0)),p=function(e){return Object(h.jsx)("svg",{className:"icon ".concat(e.className),fill:e.fill,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(h.jsx)("path",{d:"M424 64h-88V48c0-26.51-21.49-48-48-48h-64c-26.51 0-48 21.49-48 48v16H88c-22.091 0-40 17.909-40 40v32c0 8.837 7.163 16 16 16h384c8.837 0 16-7.163 16-16v-32c0-22.091-17.909-40-40-40zM208 48c0-8.82 7.18-16 16-16h64c8.82 0 16 7.18 16 16v16h-96zM78.364 184a5 5 0 00-4.994 5.238l13.2 277.042c1.22 25.64 22.28 45.72 47.94 45.72h242.98c25.66 0 46.72-20.08 47.94-45.72l13.2-277.042a5 5 0 00-4.994-5.238zM320 224c0-8.84 7.16-16 16-16s16 7.16 16 16v208c0 8.84-7.16 16-16 16s-16-7.16-16-16zm-80 0c0-8.84 7.16-16 16-16s16 7.16 16 16v208c0 8.84-7.16 16-16 16s-16-7.16-16-16zm-80 0c0-8.84 7.16-16 16-16s16 7.16 16 16v208c0 8.84-7.16 16-16 16s-16-7.16-16-16z"})})},j=r(20),m=r(13),b=r.n(m);var v,f="https://pebbletor.herokuapp.com",O="".concat(f,"/hills"),k="".concat(f,"/markers"),x=function(e){return b.a.delete("".concat(O,"/").concat(e))},_=function(e){return b.a.post(k,e)},g=function(e){return b.a.delete("".concat(k,"/").concat(e))},M=function(e,t){var r;return function(){for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return clearTimeout(r),new Promise((function(a){r=setTimeout((function(){return a(e.apply(void 0,n))}),t)}))}}((function(e,t){b.a.post("".concat(k,"/").concat(e),t)}),200),N=(r(168),function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={hills:[]},e.deleteHill=function(t){x(t).then((function(){var r=e.state.hills.filter((function(e){return e._id!==t}));e.setState({hills:r})}))},e}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=this;b.a.get(O).then((function(t){return e.setState({hills:[].concat(Object(i.a)(e.state.hills),Object(i.a)(t.data))})}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"home",children:[Object(h.jsx)("h1",{className:"home__title",children:"Showing all hill charts"}),this.state.hills.map((function(t,r){return Object(h.jsxs)("div",{className:"card hill-card",children:[Object(h.jsx)(j.b,{to:"/hill/".concat(t._id),className:"hill-card__link",children:Object(h.jsx)("h1",{children:t.name})}),Object(h.jsxs)("p",{className:"hill-card__author",children:["by ",t.author]}),Object(h.jsx)("p",{className:"hill-card__description",children:t.description}),Object(h.jsxs)("div",{className:"hill-card__data",children:[Object(h.jsxs)("div",{className:"hill-card__dates",children:[Object(h.jsxs)("p",{className:"hill-card__date",children:["Created ",new Date(t.createdAt).toUTCString()]}),t.updatedAt&&Object(h.jsxs)("p",{className:"hill-card__date",children:["Last updated ",new Date(t.updatedAt).toUTCString()]})]}),Object(h.jsx)("button",{onClick:function(){return e.deleteHill(t._id)},className:"hill-card__delete",children:Object(h.jsx)(p,{})})]})]},r)}))]})}}]),r}(n.a.Component)),w=r(8),C=r(2),y=(r(173),function(){var e=Object(a.useState)(""),t=Object(w.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(""),s=Object(w.a)(c,2),i=s[0],l=s[1],o=Object(a.useState)(""),d=Object(w.a)(o,2),u=d[0],p=d[1],j=Object(a.useState)(!1),m=Object(w.a)(j,2),v=m[0],f=m[1];return v?Object(h.jsx)(C.a,{to:"/"}):Object(h.jsxs)("div",{className:"create",children:[Object(h.jsx)("h1",{className:"create__title",children:"Create a hill chart"}),Object(h.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),(t={name:r,description:i,author:u},b.a.post(O,t)).then((function(){f(!0)}))},className:"card create__form",children:[Object(h.jsx)("label",{className:"create__label",children:"Hill chart name: "}),Object(h.jsx)("input",{type:"text",className:"create__input",required:!0,value:r,onChange:function(e){return n(e.target.value)}}),Object(h.jsx)("label",{className:"create__label",children:"Hill chart description: "}),Object(h.jsx)("textarea",{className:"create__input",required:!0,value:i,onChange:function(e){return l(e.target.value)}}),Object(h.jsx)("label",{className:"create__label",children:"Hill chart author: "}),Object(h.jsx)("input",{type:"text",className:"create__input",required:!0,value:u,onChange:function(e){return p(e.target.value)}}),Object(h.jsx)("span",{children:Object(h.jsx)("button",{className:"create__save",type:"submit",children:"Save"})})]})]})}),S=(r(174),function(){var e=Object(a.useState)(""),t=Object(w.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(""),s=Object(w.a)(c,2),i=s[0],l=s[1],o=Object(a.useState)(""),d=Object(w.a)(o,2),u=d[0],p=d[1];return Object(h.jsxs)("div",{className:"create",children:[Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(h.jsx)("label",{children:"Hill chart name: "}),Object(h.jsx)("input",{type:"text",required:!0,value:r,onChange:function(e){return n(e.target.value)}}),Object(h.jsx)("label",{children:"Hill chart description: "}),Object(h.jsx)("textarea",{required:!0,value:i,onChange:function(e){return l(e.target.value)}}),Object(h.jsx)("label",{children:"Hill chart author: "}),Object(h.jsx)("input",{type:"text",required:!0,value:u,onChange:function(e){return p(e.target.value)}}),Object(h.jsx)("button",{type:"submit",children:"Save"})]}),Object(h.jsx)("p",{children:r}),Object(h.jsx)("p",{children:i}),Object(h.jsx)("p",{children:u})]})}),A=(r(175),function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={checked:!0},e.setTheme=function(t){"light-theme"===t?e.setState({checked:!1}):e.setState({checked:!0}),localStorage.setItem("theme",t),document.querySelector("body").className=t},e.onClick=function(){var t=!e.state.checked?"dark-theme":"light-theme";e.setTheme(t)},e}return Object(o.a)(r,[{key:"componentDidMount",value:function(){"dark-theme"===localStorage.getItem("theme")?this.setTheme("dark-theme"):this.setTheme("light-theme")}},{key:"render",value:function(){return this.state.checked?Object(h.jsx)("div",{className:"theme-switch",children:Object(h.jsx)("button",{className:"theme-switch--button",onClick:this.onClick,children:Object(h.jsx)("svg",{className:"theme-switch--icon-sun",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 302.4 302.4",children:Object(h.jsx)("path",{d:"M204.8 97.6C191.2 84 172 75.2 151.2 75.2s-40 8.4-53.6 22.4c-13.6 13.6-22.4 32.8-22.4 53.6s8.8 40 22.4 53.6c13.6 13.6 32.8 22.4 53.6 22.4s40-8.4 53.6-22.4c13.6-13.6 22.4-32.8 22.4-53.6s-8.4-40-22.4-53.6zm-14.4 92.8c-10 10-24 16-39.2 16s-29.2-6-39.2-16-16-24-16-39.2 6-29.2 16-39.2 24-16 39.2-16 29.2 6 39.2 16 16 24 16 39.2-6 29.2-16 39.2zM292 140.8h-30.8c-5.6 0-10.4 4.8-10.4 10.4 0 5.6 4.8 10.4 10.4 10.4H292c5.6 0 10.4-4.8 10.4-10.4 0-5.6-4.8-10.4-10.4-10.4zM151.2 250.8c-5.6 0-10.4 4.8-10.4 10.4V292c0 5.6 4.8 10.4 10.4 10.4 5.6 0 10.4-4.8 10.4-10.4v-30.8c0-5.6-4.8-10.4-10.4-10.4zM258 243.6l-22-22c-3.6-4-10.4-4-14.4 0s-4 10.4 0 14.4l22 22c4 4 10.4 4 14.4 0s4-10.4 0-14.4zM151.2 0c-5.6 0-10.4 4.8-10.4 10.4v30.8c0 5.6 4.8 10.4 10.4 10.4 5.6 0 10.4-4.8 10.4-10.4V10.4c0-5.6-4.8-10.4-10.4-10.4zM258.4 44.4c-4-4-10.4-4-14.4 0l-22 22c-4 4-4 10.4 0 14.4 3.6 4 10.4 4 14.4 0l22-22c4-4 4-10.4 0-14.4zM41.2 140.8H10.4c-5.6 0-10.4 4.8-10.4 10.4s4.4 10.4 10.4 10.4h30.8c5.6 0 10.4-4.8 10.4-10.4 0-5.6-4.8-10.4-10.4-10.4zM80.4 221.6c-3.6-4-10.4-4-14.4 0l-22 22c-4 4-4 10.4 0 14.4s10.4 4 14.4 0l22-22c4-4 4-10.4 0-14.4zM80.4 66.4l-22-22c-4-4-10.4-4-14.4 0s-4 10.4 0 14.4l22 22c4 4 10.4 4 14.4 0s4-10.4 0-14.4z"})})})}):Object(h.jsx)("div",{className:"theme-switch",children:Object(h.jsx)("button",{className:"theme-switch--button",onClick:this.onClick,children:Object(h.jsx)("svg",{className:"theme-switch--icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.001 512.001",children:Object(h.jsx)("path",{d:"M470.218 159.659c-25.647-63.265-74.558-112.8-137.723-139.482C292.332 3.211 248.327-3.24 205.246 1.525c-18.368 2.031-32.9 15.609-36.161 33.787-3.253 18.138 5.634 35.881 22.115 44.151 31.723 15.917 56.581 42.823 69.997 75.762 30.531 74.958-5.539 160.805-80.403 191.367-32.893 13.427-69.478 14.45-103.019 2.88-17.422-6.01-36.334.042-47.056 15.061-10.702 14.991-10.283 34.805 1.04 49.306 26.682 34.168 62.01 61.167 102.167 78.08C165.931 505.399 199.648 512 233.149 512c57.539-.001 114.432-19.478 160.852-57.037 8.587-6.948 9.917-19.542 2.968-28.13-6.948-8.589-19.543-9.916-28.13-2.968-61.963 50.137-146.025 62.086-219.386 31.189-33.879-14.269-63.675-37.034-86.165-65.835-.396-.507-.544-.697-.011-1.443.567-.795.864-.691 1.454-.487 42.714 14.734 89.302 13.434 131.18-3.661 95.269-38.892 141.175-148.121 102.332-243.492-17.073-41.917-48.717-76.162-89.104-96.427-.598-.299-.845-.423-.682-1.335.176-.978.534-1.017 1.184-1.089 36.303-4.014 73.405 1.429 107.287 15.742 53.315 22.52 94.587 64.307 116.216 117.66 21.631 53.358 21.12 112.131-1.438 165.493a220.025 220.025 0 01-3.42 7.677c-4.687 10.004-.378 21.911 9.626 26.599 10.004 4.686 21.911.375 26.598-9.626a262.49 262.49 0 004.042-9.073c26.717-63.2 27.309-132.842 1.666-196.098z"})})})})}}]),r}(n.a.Component)),P=(r(176),function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"render",value:function(){return Object(h.jsxs)("nav",{className:"navbar",children:[Object(h.jsx)(j.b,{to:"/",className:"navbar__brand",children:"PEBBLETOR"}),Object(h.jsxs)("ul",{className:"navbar__nav",children:[Object(h.jsx)("li",{className:"navbar__item",children:Object(h.jsx)(A,{})}),Object(h.jsx)("li",{className:"navbar__item",children:Object(h.jsx)(j.b,{to:"/",className:"navbar__link",children:"Hill Charts"})}),Object(h.jsx)("li",{className:"navbar__item",children:Object(h.jsx)(j.b,{to:"/create",className:"navbar__link create",children:"Create"})})]})]})}}]),r}(n.a.Component)),z=r(33),I=r(32),D=function e(){Object(l.a)(this,e)};D.getPointAtPercentage=function(e,t){var r=e.getTotalLength()/100*t,a=e.getPointAtLength(r);return[a.x,a.y]},D.getClosestPoint=function(e,t){for(var r,a,n,c,s,i=e.getTotalLength(),l=8,o=0,d=1/0,u=0;u<=i;u+=l)(s=f(c=e.getPointAtLength(u)))<d&&(n=c,o=u,d=s);for(l/=2;l>.5;){var h,p=void 0,j=void 0,m=void 0,b=void 0,v=void 0;(h=o-l)>=0&&(b=f(p=e.getPointAtLength(h)))<d?(n=p,o=h,d=b):(m=o+l)<=i&&(v=f(j=e.getPointAtLength(m)))<d?(n=j,o=m,d=v):l/=2}return n=[null===(r=n)||void 0===r?void 0:r.x,null===(a=n)||void 0===a?void 0:a.y];function f(e){var r=e.x-t[0],a=e.y-t[1];return r*r+a*a}},function(e){e.Inactive="inactive",e.Active="active",e.Complete="complete"}(v||(v={}));var H,R=r(14),T=(r(178),function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).markerRef=n.a.createRef(),a.drag=function(e){if(void 0!==a.props.selectedMarker&&a.props.marker._id===a.props.selectedMarker._id){var t=a.props.svg,r=R.d(e,t),n=D.getClosestPoint(a.props.line,r),c=Object(z.a)({},a.props.marker);c.currentPos=n,n[0]<101?c.status=v.Inactive:n[0]>1099?c.status=v.Complete:c.status=v.Active,a.props.updateMarker(c)}},a.click=function(){return a.props.selectMarker(a.props.marker)},a.drag=a.drag.bind(Object(I.a)(a)),a.click=a.click.bind(Object(I.a)(a)),a}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=R.b().on("drag",this.drag),r=this.props.marker.currentPos;0===r.length&&(r=D.getPointAtPercentage(this.props.line,this.props.marker.percentage));var a=this.props.markers.filter((function(e){return e.status===v.Inactive})).findIndex((function(t){return t._id===e.props.marker._id}));a>-1&&(r=[110,70+50*a]);var n=this.props.markers.filter((function(e){return e.status===v.Complete})).findIndex((function(t){return t._id===e.props.marker._id}));n>-1&&(r=[1e3,70+50*n]);var c=R.e(this.markerRef.current).attr("transform","translate("+r+")");c.append("circle").attr("r",10).style("fill",this.props.marker.colour).call(t),c.append("text").attr("transform","translate("+[-10,-20]+")").text(this.props.marker.name),c.on("click",this.click)}},{key:"componentDidUpdate",value:function(){var e=this,t=R.b().on("drag",this.drag),r=R.e(this.markerRef.current);r.selectAll("text").remove(),r.selectAll("circle").remove(),r.append("circle").attr("r",10).style("fill",this.props.marker.colour).call(t),this.props.marker._id===this.props.selectedMarker._id&&r.append("circle").attr("r",12).attr("class","selected-marker").style("fill","none").style("stroke-width",2),r.append("text").attr("transform","translate("+[-10,-20]+")").text(this.props.marker.name);var a=this.props.markers.filter((function(e){return e.status===v.Inactive})).findIndex((function(t){return t._id===e.props.marker._id})),n=this.props.marker.currentPos;a>-1&&(n=[110,70+50*a]);var c=this.props.markers.filter((function(e){return e.status===v.Complete})).findIndex((function(t){return t._id===e.props.marker._id}));c>-1&&(n=[1e3,70+50*c]),0!==this.props.marker.currentPos.length&&(this.props.marker.isNewPercentage&&(n=D.getPointAtPercentage(this.props.line,this.props.marker.percentage)),r.attr("transform","translate("+n+")")),this.props.marker.currentPos=n,this.props.marker.isNewPercentage=!1}},{key:"render",value:function(){return Object(h.jsx)("g",{ref:this.markerRef})}}]),r}(n.a.Component)),q=(r(179),function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={svg:null,line:null},e}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=R.c().curve(R.a),t=R.e("#hill__svg");t.on("click",this.props.deselectMarker);var r=t.append("path").datum(this.props.points).attr("d",e).attr("id","hill__path");t.append("path").datum([[600,400],[600,120]]).attr("d",R.c()).attr("class","hill__line"),t.append("text").attr("transform","translate("+[100,20]+")").attr("class","hill__text").text("Inactive"),t.append("text").attr("transform","translate("+[990,20]+")").attr("class","hill__text").text("Complete"),this.setState({svg:t.node(),line:r.node()})}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"hill",children:[Object(h.jsx)("h1",{className:"hill__title",children:this.props.hill.name}),Object(h.jsx)("p",{className:"hill__subtitle",children:this.props.hill.description}),Object(h.jsx)("svg",{id:"hill__svg",width:this.props.size.width,height:this.props.size.height,children:this.props.markers.map((function(t){return Object(h.jsx)(T,{svg:e.state.svg,line:e.state.line,marker:t,markers:e.props.markers,selectedMarker:e.props.selectedMarker,selectMarker:e.props.selectMarker,updateMarker:e.props.updateMarker},t._id)}))})]})}}]),r}(n.a.Component));!function(e){e.Gray="gray",e.Yellow="yellow",e.Orange="orange",e.Maroon="maroon",e.Red="red",e.Purple="purple",e.Fuchsia="fuchsia",e.Pink="pink",e.Green="green",e.Lime="lime",e.Olive="olive",e.Navy="navy",e.Blue="blue",e.Teal="teal",e.Aqua="aqua"}(H||(H={}));r(180);var L=function(e){var t,r,n,c,s=Object(a.useState)((null===(t=e.marker)||void 0===t?void 0:t.name)||""),i=Object(w.a)(s,2),l=i[0],o=i[1],d=Object(a.useState)((null===(r=e.marker)||void 0===r?void 0:r.percentage)||"50"),u=Object(w.a)(d,2),p=u[0],j=u[1],m=Object(a.useState)((null===(n=e.marker)||void 0===n?void 0:n.colour)||H.Gray),b=Object(w.a)(m,2),f=b[0],O=b[1],k=Object(a.useState)((null===(c=e.marker)||void 0===c?void 0:c.status)||v.Active),x=Object(w.a)(k,2),_=x[0],g=x[1];return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"modal-form__header",children:[Object(h.jsx)("h2",{className:"modal-form__header-title",children:e.title}),Object(h.jsx)("button",{className:"modal-form__header-close",onClick:function(){return e.selectModal("")},children:"x"})]}),Object(h.jsxs)("form",{onSubmit:function(t){var r,a,n;t.preventDefault();var c={hillId:e.hillId,name:l,percentage:parseInt(p.toString()),isNewPercentage:p!==(null===(r=e.marker)||void 0===r?void 0:r.percentage)||(e.marker.status===v.Complete||e.marker.status===v.Inactive)&&_===v.Active,currentPos:(null===(a=e.marker)||void 0===a?void 0:a.currentPos)||[],colour:f,status:_};if(null===(n=e.marker)||void 0===n?void 0:n._id){var s,i,o,d=Object(z.a)(Object(z.a)({},c),{},{_id:null===(s=e.marker)||void 0===s?void 0:s._id,createdAt:null===(i=e.marker)||void 0===i?void 0:i.createdAt,updatedAt:null===(o=e.marker)||void 0===o?void 0:o.updatedAt});e.update(d)}else e.add(c);e.selectModal("")},className:"modal-form__content",children:[Object(h.jsx)("label",{className:"modal-form__label",children:"Marker name: "}),Object(h.jsx)("input",{type:"text",className:"modal-form__input",required:!0,value:l,onChange:function(e){return o(e.target.value)}}),Object(h.jsx)("label",{className:"modal-form__label",children:"Marker percentage: "}),Object(h.jsx)("input",{type:"text",className:"modal-form__input",required:!0,value:p,onChange:function(e){return j(e.target.value)}}),Object(h.jsx)("label",{className:"modal-form__label",children:"Marker colour: "}),Object(h.jsx)("select",{className:"modal-form__input",required:!0,value:f,onChange:function(e){return O(e.target.value)},children:Object.keys(H).map((function(e){return Object(h.jsx)("option",{value:H[e],style:{color:H[e]},children:e})}))}),Object(h.jsx)("label",{className:"modal-form__label",children:"Marker status: "}),Object(h.jsx)("select",{className:"modal-form__input",required:!0,value:_,onChange:function(e){return g(e.target.value)},children:Object.keys(v).map((function(e){return Object(h.jsx)("option",{value:v[e],children:e})}))}),Object(h.jsxs)("div",{className:"modal-form__content-buttons",children:[Object(h.jsx)("button",{className:"modal-form__button",onClick:function(){return e.selectModal("")},children:"Cancel"}),Object(h.jsx)("button",{className:"modal-form__button save",type:"submit",children:"Save"})]})]})]})},B=(r(181),function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"render",value:function(){var e=this;switch(this.props.modal){case"add":return Object(h.jsx)("div",{className:"modal",children:Object(h.jsx)("div",{className:"modal__card",children:Object(h.jsx)(L,{title:"Add Marker",hillId:this.props.hillId,add:this.props.add,update:this.props.update,selectModal:this.props.selectModal})})});case"edit":return Object(h.jsx)("div",{className:"modal",children:Object(h.jsx)("div",{className:"modal__card",children:Object(h.jsx)(L,{title:"Edit Marker",hillId:this.props.hillId,add:this.props.add,update:this.props.update,marker:this.props.marker,selectModal:this.props.selectModal})})});case"delete":return Object(h.jsx)("div",{className:"modal",children:Object(h.jsxs)("div",{className:"modal__card",children:[Object(h.jsxs)("div",{className:"modal-form__header",children:[Object(h.jsx)("h2",{className:"modal-form__header-title",children:"Delete Marker"}),Object(h.jsx)("button",{className:"modal-form__header-close",onClick:function(){return e.props.selectModal("")},children:"x"})]}),Object(h.jsxs)("div",{className:"modal-form__content",children:[Object(h.jsxs)("p",{className:"modal-form__text",children:["Are you sure you want to delete '",this.props.marker.name,"'?"]}),Object(h.jsxs)("div",{className:"modal-form__content-buttons",children:[Object(h.jsx)("button",{className:"modal-form__button",onClick:function(){return e.props.selectModal("")},children:"Cancel"}),Object(h.jsx)("button",{className:"modal-form__button delete",onClick:function(){e.props.delete(e.props.marker._id),e.props.selectModal("")},children:"Delete"})]})]})]})});default:return null}}}]),r}(n.a.Component)),V=function(e){return Object(h.jsxs)("svg",{className:"icon ".concat(e.className),fill:e.fill,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[Object(h.jsx)("path",{d:"M14.25 0H2.75C1.23 0 0 1.23 0 2.75v15.5C0 19.77 1.23 21 2.75 21h6.59a8.731 8.731 0 01-.84-3.75c0-1.15.22-2.25.63-3.26-.04.01-.08.01-.13.01H4c-.55 0-1-.45-1-1s.45-1 1-1h5c.38 0 .72.22.88.54A8.827 8.827 0 0112.36 10H4c-.55 0-1-.45-1-1s.45-1 1-1h9c.55 0 1 .45 1 1 0 .05 0 .09-.01.13.93-.38 1.95-.6 3.01-.62V2.75C17 1.23 15.77 0 14.25 0zM8 6H4c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1z"}),Object(h.jsx)("path",{d:"M17.25 10.5c-3.722 0-6.75 3.028-6.75 6.75S13.528 24 17.25 24 24 20.972 24 17.25s-3.028-6.75-6.75-6.75zM20 18.25h-1.75V20a1 1 0 01-2 0v-1.75H14.5a1 1 0 010-2h1.75V14.5a1 1 0 012 0v1.75H20a1 1 0 010 2z"})]})},E=function(e){return Object(h.jsxs)("svg",{className:"icon ".concat(e.className),fill:e.fill,viewBox:"0 0 512 511",xmlns:"http://www.w3.org/2000/svg",children:[Object(h.jsx)("path",{d:"M405.332 256.484c-11.797 0-21.332 9.559-21.332 21.332v170.668c0 11.754-9.559 21.332-21.332 21.332H64c-11.777 0-21.332-9.578-21.332-21.332V149.816c0-11.754 9.555-21.332 21.332-21.332h170.668c11.797 0 21.332-9.558 21.332-21.332 0-11.777-9.535-21.336-21.332-21.336H64c-35.285 0-64 28.715-64 64v298.668c0 35.286 28.715 64 64 64h298.668c35.285 0 64-28.714 64-64V277.816c0-11.796-9.54-21.332-21.336-21.332zm0 0"}),Object(h.jsx)("path",{d:"M200.02 237.05a10.793 10.793 0 00-2.922 5.438l-15.082 75.438c-.703 3.496.406 7.101 2.922 9.64a10.673 10.673 0 007.554 3.114c.68 0 1.387-.063 2.09-.211l75.414-15.082c2.09-.43 3.988-1.43 5.461-2.926l168.79-168.79-75.415-75.41zm0 0M496.383 16.102c-20.797-20.801-54.633-20.801-75.414 0l-29.524 29.523 75.414 75.414 29.524-29.527C506.453 81.465 512 68.066 512 53.816s-5.547-27.648-15.617-37.714zm0 0"})]})},F=(r(182),function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).dropdownContentRef=n.a.createRef(),e.dropdownButtonRef=n.a.createRef(),e.edit=function(t){e.toggleDropdown(),e.props.selectMarker(t),e.props.selectModal("edit")},e.toggleDropdown=function(){var t,r=null===(t=e.dropdownContentRef.current)||void 0===t?void 0:t.style.display;e.dropdownContentRef.current.style.display="none"===r?"flex":"none"},e.hideDropdown=function(t){var r,a;(null===(r=e.dropdownContentRef.current)||void 0===r?void 0:r.contains(t.target))||(null===(a=e.dropdownContentRef.current)||void 0===a?void 0:a.contains(t.target))||(e.dropdownContentRef.current.style.display="none")},e}return Object(o.a)(r,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.hideDropdown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.hideDropdown)}},{key:"render",value:function(){var e=this,t=!this.props.markers.some((function(t){return void 0!==e.props.selectedMarker&&t._id===e.props.selectedMarker._id})),r=0===this.props.markers.length,a=t&&!r?"dropdown__button disabled":"dropdown__button";return Object(h.jsxs)("div",{className:"toolbar",children:[Object(h.jsxs)("button",{className:"toolbar__button",onClick:function(){return e.props.selectModal("add")},children:[Object(h.jsx)(V,{className:"toolbar__icon"})," Add"]}),Object(h.jsxs)("div",{className:"toolbar__edit",children:[Object(h.jsxs)("button",{className:"toolbar__edit-button",disabled:t,onClick:function(){return e.props.selectModal("edit")},children:[Object(h.jsx)(E,{className:"toolbar__icon"}),Object(h.jsx)("span",{children:"Edit"})]}),Object(h.jsxs)("div",{className:"dropdown",children:[Object(h.jsx)("button",{className:a,disabled:r,ref:this.dropdownButtonRef,onClick:function(){return e.toggleDropdown()},children:"\u25bc"}),Object(h.jsx)("div",{className:"dropdown__content",style:{display:"none"},ref:this.dropdownContentRef,children:this.props.markers.map((function(t,r){return Object(h.jsxs)("button",{className:"dropdown__item",onClick:function(){return e.edit({_id:t._id,name:t.name})},children:[Object(h.jsx)("div",{style:{backgroundColor:t.colour},className:"dropdown__marker"}),t.name]},r)}))})]})]}),Object(h.jsxs)("button",{className:"toolbar__button delete",disabled:t,onClick:function(){return e.props.selectModal("delete")},children:[Object(h.jsx)(p,{className:"toolbar__icon"}),Object(h.jsx)("span",{children:"Delete"})]})]})}}]),r}(n.a.Component)),U={_id:"",name:"",description:"",author:"",createdAt:0,updatedAt:0},G=(r(183),function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={hill:U,markers:[],activeModal:"",selectedMarker:{_id:"",name:""},isMarkerClick:!1},e.update=function(){return e.props.socket.emit("update-hill-markers",{room:e.props.id,markers:e.state.markers})},e.selectModal=function(t){return e.setState({activeModal:t})},e.deselectMarker=function(){e.state.isMarkerClick||e.setState({selectedMarker:{_id:"",name:""}}),e.setState({isMarkerClick:!1})},e.selectMarker=function(t){return e.setState({isMarkerClick:!0,selectedMarker:t})},e.addMarker=function(t){_(t).then((function(t){e.setState({markers:[].concat(Object(i.a)(e.state.markers),[t.data])},(function(){e.update()}))}))},e.updateMarker=function(t){var r=Object(i.a)(e.state.markers),a=r.findIndex((function(e){return e._id===t._id}));r[a]=t,e.setState({markers:r},(function(){e.update(),M(t._id,t)}))},e.deleteMarker=function(t){var r=Object(i.a)(e.state.markers),a=r.findIndex((function(e){return e._id===t}));r.splice(a,1),e.setState({markers:r},(function(){e.update(),g(t)}))},e}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e,t,r=this;this.props.socket.emit("hill-connect",this.props.id),this.props.socket.on("update-hill-markers",(function(e){return r.setState({markers:e})})),(e=this.props.id,b.a.get("".concat(O,"/").concat(e))).then((function(e){return r.setState({hill:e.data})})),(t=this.props.id,b.a.get("".concat(k,"/hill/").concat(t))).then((function(e){return r.setState({markers:e.data})}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{children:[Object(h.jsx)(q,{hill:this.state.hill,markers:this.state.markers,selectedMarker:this.state.selectedMarker,updateMarker:this.updateMarker,selectMarker:this.selectMarker,deselectMarker:this.deselectMarker,size:{width:1200,height:450},points:[[100,400],[300,350],[600,120],[900,350],[1100,400]]}),Object(h.jsx)(F,{markers:this.state.markers,selectedMarker:this.state.selectedMarker,selectMarker:this.selectMarker,selectModal:this.selectModal}),Object(h.jsx)(B,{modal:this.state.activeModal,hillId:this.props.id,add:this.addMarker,update:this.updateMarker,delete:this.deleteMarker,marker:this.state.markers.find((function(t){return t._id===e.state.selectedMarker._id})),selectModal:this.selectModal})]})}}]),r}(n.a.Component)),J=r(88),W=(r(213),Object(J.io)("/"));var Y=function(){return Object(h.jsx)(j.a,{children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(P,{}),Object(h.jsx)(C.d,{children:Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(C.b,{exact:!0,path:"/",children:Object(h.jsx)(N,{})}),Object(h.jsx)(C.b,{path:"/edit/:id",children:Object(h.jsx)(S,{})}),Object(h.jsx)(C.b,{path:"/create",children:Object(h.jsx)(y,{})}),Object(h.jsx)(C.b,{path:"/hill/:id",render:function(e){return Object(h.jsx)(G,{id:e.match.params.id,socket:W})}})]})})]})})},K=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,216)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),c(e),s(e)}))};r(214);s.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(Y,{})}),document.getElementById("root")),K()},42:function(e,t,r){}},[[215,1,2]]]);
//# sourceMappingURL=main.20f6169f.chunk.js.map