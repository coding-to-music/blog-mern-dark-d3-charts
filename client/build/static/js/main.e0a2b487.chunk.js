(this["webpackJsonphill-chart"]=this["webpackJsonphill-chart"]||[]).push([[0],{153:function(e,t,a){},172:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(33),s=a.n(c),i=a(21),l=a(5),o=a(6),d=a(7),u=a(8),h=(a(23),a(0)),m=function(e){return Object(h.jsx)("svg",{className:"icon ".concat(e.className),fill:e.fill,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(h.jsx)("path",{d:"M424 64h-88V48c0-26.51-21.49-48-48-48h-64c-26.51 0-48 21.49-48 48v16H88c-22.091 0-40 17.909-40 40v32c0 8.837 7.163 16 16 16h384c8.837 0 16-7.163 16-16v-32c0-22.091-17.909-40-40-40zM208 48c0-8.82 7.18-16 16-16h64c8.82 0 16 7.18 16 16v16h-96zM78.364 184a5 5 0 00-4.994 5.238l13.2 277.042c1.22 25.64 22.28 45.72 47.94 45.72h242.98c25.66 0 46.72-20.08 47.94-45.72l13.2-277.042a5 5 0 00-4.994-5.238zM320 224c0-8.84 7.16-16 16-16s16 7.16 16 16v208c0 8.84-7.16 16-16 16s-16-7.16-16-16zm-80 0c0-8.84 7.16-16 16-16s16 7.16 16 16v208c0 8.84-7.16 16-16 16s-16-7.16-16-16zm-80 0c0-8.84 7.16-16 16-16s16 7.16 16 16v208c0 8.84-7.16 16-16 16s-16-7.16-16-16z"})})},j=function(e){return Object(h.jsxs)("svg",{className:"icon ".concat(e.className),fill:e.fill,viewBox:"0 0 512 511",xmlns:"http://www.w3.org/2000/svg",children:[Object(h.jsx)("path",{d:"M405.332 256.484c-11.797 0-21.332 9.559-21.332 21.332v170.668c0 11.754-9.559 21.332-21.332 21.332H64c-11.777 0-21.332-9.578-21.332-21.332V149.816c0-11.754 9.555-21.332 21.332-21.332h170.668c11.797 0 21.332-9.558 21.332-21.332 0-11.777-9.535-21.336-21.332-21.336H64c-35.285 0-64 28.715-64 64v298.668c0 35.286 28.715 64 64 64h298.668c35.285 0 64-28.714 64-64V277.816c0-11.796-9.54-21.332-21.336-21.332zm0 0"}),Object(h.jsx)("path",{d:"M200.02 237.05a10.793 10.793 0 00-2.922 5.438l-15.082 75.438c-.703 3.496.406 7.101 2.922 9.64a10.673 10.673 0 007.554 3.114c.68 0 1.387-.063 2.09-.211l75.414-15.082c2.09-.43 3.988-1.43 5.461-2.926l168.79-168.79-75.415-75.41zm0 0M496.383 16.102c-20.797-20.801-54.633-20.801-75.414 0l-29.524 29.523 75.414 75.414 29.524-29.527C506.453 81.465 512 68.066 512 53.816s-5.547-27.648-15.617-37.714zm0 0"})]})},p=a(87),b=a.n(p),f=(a(153),function(e){var t="modal__button highlight ".concat(e.className);return s.a.createPortal(Object(h.jsx)(b.a,{children:Object(h.jsx)("aside",{role:"dialog",tabIndex:-1,"aria-modal":"true",className:"modal",onMouseDown:function(t){return e.onClickOutside(t)},onKeyDown:function(t){return e.onKeyDown(t)},children:Object(h.jsxs)("div",{className:"modal__card",ref:e.modalRef,children:[Object(h.jsxs)("div",{className:"modal__header",children:[Object(h.jsx)("h2",{className:"modal__header-title",children:e.text.title}),Object(h.jsx)("button",{ref:e.closeRef,className:"modal__header-close","aria-label":"Close Modal","aria-labelledby":"close-modal",onClick:function(){return e.closeModal()},children:"\xd7"}),Object(h.jsx)("span",{id:"close-modal",className:"hide-visual",children:"Close"})]}),Object(h.jsx)("div",{className:"modal__content",children:e.children}),Object(h.jsxs)("div",{className:"modal__footer",children:[Object(h.jsx)("button",{className:"modal__button",onClick:function(){return e.closeModal()},children:"Cancel"}),Object(h.jsx)("button",{className:t,onClick:function(){e.onSubmit(),e.manualClose||e.closeModal()},children:e.text.submit})]})]})})}),document.body)}),v=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).modalRef=r.a.createRef(),e.closeRef=r.a.createRef(),e.toggleScrollLock=function(){document.querySelector("html").classList.toggle("scroll-lock")},e.closeModal=function(){void 0!==e.props.trigger&&e.props.trigger.current.focus(),e.toggleScrollLock(),e.props.onClose()},e.onKeyDown=function(t){"Escape"===t.key&&e.closeModal()},e.onClickOutside=function(t){e.modalRef.current&&(t.target instanceof HTMLElement||t.target instanceof SVGElement)&&e.modalRef.current.contains(t.target)||e.closeModal()},e.onSubmit=function(){e.toggleScrollLock(),e.props.onSubmit()},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.isShown&&(this.closeRef.current.focus(),this.toggleScrollLock())}},{key:"componentDidUpdate",value:function(){this.props.isShown&&this.toggleScrollLock()}},{key:"render",value:function(){return this.props.isShown?Object(h.jsx)(f,{onSubmit:this.onSubmit,modalRef:this.modalRef,closeRef:this.closeRef,text:this.props.text,className:this.props.className,manualClose:this.props.manualClose,closeModal:this.closeModal,onKeyDown:this.onKeyDown,onClickOutside:this.onClickOutside,children:this.props.children}):null}}]),a}(r.a.Component),x=a(15),O=a(14),g=a.n(O);var k,_="https://pebbletor.herokuapp.com",N="".concat(_,"/hills"),M="".concat(_,"/markers"),w=function(e,t){return g.a.get("".concat(N,"?page=").concat(e,"&limit=").concat(t))},y=function(e){return g.a.get("".concat(N,"/").concat(e))},C=function(e){return g.a.delete("".concat(N,"/").concat(e))},S=function(e){return g.a.post(M,e)},R=function(e,t,a){return g.a.post("".concat(M,"/").concat(e,"?isnewimage=").concat(a),t)},I=function(e){return g.a.delete("".concat(M,"/").concat(e))},P=function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return clearTimeout(a),new Promise((function(n){a=setTimeout((function(){return n(e.apply(void 0,r))}),t)}))}}((function(e,t){g.a.post("".concat(M,"/").concat(e),t)}),200),A={_id:"",name:"",description:"",author:"",createdAt:0,updatedAt:0},D=(a(172),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hills:[],hill:A,showModal:!1,nextPage:void 0,previousPage:void 0},e.deleteHill=function(t){C(t).then((function(){var a=e.state.hills.filter((function(e){return e._id!==t}));e.setState({hills:a})}))},e.selectHill=function(t){e.setState({hill:t}),e.setState({showModal:!0})},e.deselectHill=function(){e.setState({hill:A}),e.setState({showModal:!1})},e.fetchNextHills=function(t){w(t.page,t.limit).then((function(t){console.log(t.data),e.setState({hills:[].concat(Object(i.a)(e.state.hills),Object(i.a)(t.data.results)),nextPage:t.data.next,previousPage:t.data.previous})}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;w(1,4).then((function(t){e.setState({hills:[].concat(Object(i.a)(e.state.hills),Object(i.a)(t.data.results)),nextPage:t.data.next,previousPage:t.data.previous})}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"home",children:[Object(h.jsx)("div",{className:"home__header",children:Object(h.jsx)("h1",{className:"home__title",children:"Hill charts"})}),this.state.hills.map((function(t,a){return Object(h.jsxs)("div",{className:"card hill-card",children:[Object(h.jsx)(x.b,{to:"/hill/".concat(t._id),className:"hill-card__link",children:Object(h.jsx)("h2",{children:t.name})}),Object(h.jsxs)("p",{className:"hill-card__author",children:["by ",t.author]}),Object(h.jsx)("p",{className:"hill-card__description",children:t.description}),Object(h.jsxs)("div",{className:"hill-card__data",children:[Object(h.jsxs)("div",{className:"hill-card__dates",children:[Object(h.jsxs)("p",{className:"hill-card__date",children:["Created ",new Date(t.createdAt).toUTCString()]}),t.updatedAt&&Object(h.jsxs)("p",{className:"hill-card__date",children:["Last updated ",new Date(t.updatedAt).toUTCString()]})]}),Object(h.jsxs)("div",{className:"hill-card__buttons",children:[Object(h.jsx)(x.b,{to:"/edit/".concat(t._id),className:"hill-card__edit",children:Object(h.jsx)(j,{})}),Object(h.jsx)("button",{onClick:function(){return e.selectHill(t)},className:"hill-card__delete",children:Object(h.jsx)(m,{})})]})]})]},a)})),this.state.nextPage?Object(h.jsx)("div",{className:"home__next",children:Object(h.jsx)("button",{className:"load-more",onClick:function(){return e.fetchNextHills(e.state.nextPage)},children:Object(h.jsx)("p",{children:"Load More"})})}):null,Object(h.jsx)(v,{onSubmit:function(){return e.deleteHill(e.state.hill._id)},onClose:function(){return e.deselectHill()},manualClose:!1,isShown:this.state.showModal,text:{title:"Delete Hill",submit:"Delete"},className:"delete",children:Object(h.jsxs)("p",{children:["Are you sure you want to delete ",Object(h.jsx)("b",{children:this.state.hill.name}),"?"]})})]})}}]),a}(r.a.Component)),H=a(2),z=a(3),B=(a(175),function(){var e=Object(n.useState)(""),t=Object(H.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(H.a)(c,2),i=s[0],l=s[1],o=Object(n.useState)(""),d=Object(H.a)(o,2),u=d[0],m=d[1],j=Object(n.useState)(!1),p=Object(H.a)(j,2),b=p[0],f=p[1];return b?Object(h.jsx)(z.a,{to:"/"}):Object(h.jsxs)("div",{className:"create",children:[Object(h.jsx)("h1",{className:"create__title",children:"Create a hill chart"}),Object(h.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),(t={name:a,description:i,author:u},g.a.post(N,t)).then((function(){f(!0)}))},className:"card form",children:[Object(h.jsx)("label",{className:"form__label",children:"Hill chart name: "}),Object(h.jsx)("input",{type:"text",className:"form__input",required:!0,value:a,onChange:function(e){return r(e.target.value)}}),Object(h.jsx)("label",{className:"form__label",children:"Hill chart description: "}),Object(h.jsx)("textarea",{className:"form__input",required:!0,value:i,onChange:function(e){return l(e.target.value)}}),Object(h.jsx)("label",{className:"form__label",children:"Hill chart author: "}),Object(h.jsx)("input",{type:"text",className:"form__input",required:!0,value:u,onChange:function(e){return m(e.target.value)}}),Object(h.jsx)("span",{children:Object(h.jsx)("button",{className:"form__save",type:"submit",children:"Save"})})]})]})}),L=(a(176),function(e){var t=Object(n.useState)(A),a=Object(H.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),i=Object(H.a)(s,2),l=i[0],o=i[1],d=Object(n.useState)(""),u=Object(H.a)(d,2),m=u[0],j=u[1],p=Object(n.useState)(""),b=Object(H.a)(p,2),f=b[0],v=b[1],x=Object(n.useState)(!1),O=Object(H.a)(x,2),k=O[0],_=O[1];Object(n.useEffect)((function(){y(e.id).then((function(e){c(e.data),o(e.data.name),j(e.data.description),v(e.data.author)}))}),[e.id]);return k?Object(h.jsx)(z.a,{to:"/"}):Object(h.jsxs)("div",{className:"edit",children:[Object(h.jsx)("h1",{className:"edit__title",children:"Edit a hill chart"}),Object(h.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a,n,c={_id:r._id,name:l,description:m,author:f,createdAt:r.createdAt,updatedAt:r.updatedAt};(a=e.id,n=c,g.a.post("".concat(N,"/").concat(a),n)).then((function(){_(!0)}))},className:"card form",children:[Object(h.jsx)("label",{className:"form__label",children:"Hill chart name: "}),Object(h.jsx)("input",{type:"text",className:"form__input",required:!0,value:l,onChange:function(e){return o(e.target.value)}}),Object(h.jsx)("label",{className:"form__label",children:"Hill chart description: "}),Object(h.jsx)("textarea",{className:"form__input",required:!0,value:m,onChange:function(e){return j(e.target.value)}}),Object(h.jsx)("label",{className:"form__label",children:"Hill chart author: "}),Object(h.jsx)("input",{type:"text",className:"form__input",required:!0,value:f,onChange:function(e){return v(e.target.value)}}),Object(h.jsx)("span",{children:Object(h.jsx)("button",{className:"form__save",type:"submit",children:"Save"})})]})]})}),E=function(e){return Object(h.jsx)("svg",{className:"icon ".concat(e.className),fill:e.fill,viewBox:"0 0 512.001 512.001",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsx)("path",{d:"M470.218 159.659c-25.647-63.265-74.558-112.8-137.723-139.482C292.332 3.211 248.327-3.24 205.246 1.525c-18.368 2.031-32.9 15.609-36.161 33.787-3.253 18.138 5.634 35.881 22.115 44.151 31.723 15.917 56.581 42.823 69.997 75.762 30.531 74.958-5.539 160.805-80.403 191.367-32.893 13.427-69.478 14.45-103.019 2.88-17.422-6.01-36.334.042-47.056 15.061-10.702 14.991-10.283 34.805 1.04 49.306 26.682 34.168 62.01 61.167 102.167 78.08C165.931 505.399 199.648 512 233.149 512c57.539-.001 114.432-19.478 160.852-57.037 8.587-6.948 9.917-19.542 2.968-28.13-6.948-8.589-19.543-9.916-28.13-2.968-61.963 50.137-146.025 62.086-219.386 31.189-33.879-14.269-63.675-37.034-86.165-65.835-.396-.507-.544-.697-.011-1.443.567-.795.864-.691 1.454-.487 42.714 14.734 89.302 13.434 131.18-3.661 95.269-38.892 141.175-148.121 102.332-243.492-17.073-41.917-48.717-76.162-89.104-96.427-.598-.299-.845-.423-.682-1.335.176-.978.534-1.017 1.184-1.089 36.303-4.014 73.405 1.429 107.287 15.742 53.315 22.52 94.587 64.307 116.216 117.66 21.631 53.358 21.12 112.131-1.438 165.493a220.025 220.025 0 01-3.42 7.677c-4.687 10.004-.378 21.911 9.626 26.599 10.004 4.686 21.911.375 26.598-9.626a262.49 262.49 0 004.042-9.073c26.717-63.2 27.309-132.842 1.666-196.098z"})})},T=function(e){return Object(h.jsx)("svg",{className:"icon ".concat(e.className),fill:e.fill,viewBox:"0 0 302.4 302.4",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsx)("path",{d:"M204.8 97.6C191.2 84 172 75.2 151.2 75.2s-40 8.4-53.6 22.4c-13.6 13.6-22.4 32.8-22.4 53.6s8.8 40 22.4 53.6c13.6 13.6 32.8 22.4 53.6 22.4s40-8.4 53.6-22.4c13.6-13.6 22.4-32.8 22.4-53.6s-8.4-40-22.4-53.6zm-14.4 92.8c-10 10-24 16-39.2 16s-29.2-6-39.2-16-16-24-16-39.2 6-29.2 16-39.2 24-16 39.2-16 29.2 6 39.2 16 16 24 16 39.2-6 29.2-16 39.2zM292 140.8h-30.8c-5.6 0-10.4 4.8-10.4 10.4 0 5.6 4.8 10.4 10.4 10.4H292c5.6 0 10.4-4.8 10.4-10.4 0-5.6-4.8-10.4-10.4-10.4zM151.2 250.8c-5.6 0-10.4 4.8-10.4 10.4V292c0 5.6 4.8 10.4 10.4 10.4 5.6 0 10.4-4.8 10.4-10.4v-30.8c0-5.6-4.8-10.4-10.4-10.4zM258 243.6l-22-22c-3.6-4-10.4-4-14.4 0s-4 10.4 0 14.4l22 22c4 4 10.4 4 14.4 0s4-10.4 0-14.4zM151.2 0c-5.6 0-10.4 4.8-10.4 10.4v30.8c0 5.6 4.8 10.4 10.4 10.4 5.6 0 10.4-4.8 10.4-10.4V10.4c0-5.6-4.8-10.4-10.4-10.4zM258.4 44.4c-4-4-10.4-4-14.4 0l-22 22c-4 4-4 10.4 0 14.4 3.6 4 10.4 4 14.4 0l22-22c4-4 4-10.4 0-14.4zM41.2 140.8H10.4c-5.6 0-10.4 4.8-10.4 10.4s4.4 10.4 10.4 10.4h30.8c5.6 0 10.4-4.8 10.4-10.4 0-5.6-4.8-10.4-10.4-10.4zM80.4 221.6c-3.6-4-10.4-4-14.4 0l-22 22c-4 4-4 10.4 0 14.4s10.4 4 14.4 0l22-22c4-4 4-10.4 0-14.4zM80.4 66.4l-22-22c-4-4-10.4-4-14.4 0s-4 10.4 0 14.4l22 22c4 4 10.4 4 14.4 0s4-10.4 0-14.4z"})})},U=(a(177),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={checked:!0},e.setTheme=function(t){"light-theme"===t?e.setState({checked:!1}):e.setState({checked:!0}),localStorage.setItem("theme",t),document.querySelector("body").className=t},e.onClick=function(){var t=!e.state.checked?"dark-theme":"light-theme";e.setTheme(t)},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){"dark-theme"===localStorage.getItem("theme")?this.setTheme("dark-theme"):this.setTheme("light-theme")}},{key:"render",value:function(){return this.state.checked?Object(h.jsx)("div",{className:"theme-switch",children:Object(h.jsx)("button",{className:"theme-switch__button",onClick:this.onClick,children:Object(h.jsx)(T,{className:"theme-switch__icon--sun"})})}):Object(h.jsx)("div",{className:"theme-switch",children:Object(h.jsx)("button",{className:"theme-switch__button",onClick:this.onClick,children:Object(h.jsx)(E,{className:"theme-switch__icon"})})})}}]),a}(r.a.Component)),q=a.p+"static/media/Logo.a90d934a.png",V=(a(178),function(){return Object(h.jsxs)("div",{className:"brand",children:[Object(h.jsx)("img",{className:"brand__logo",src:q,alt:"PebbleTor logo"}),Object(h.jsx)("p",{className:"brand__text",children:"PebbleTor"})]})}),F=(a(179),function(){return Object(h.jsxs)("nav",{className:"navbar",children:[Object(h.jsx)(x.b,{to:"/",className:"navbar__brand",children:Object(h.jsx)(V,{})}),Object(h.jsxs)("ul",{className:"navbar__nav",children:[Object(h.jsx)("li",{className:"navbar__item",children:Object(h.jsx)(U,{})}),Object(h.jsx)("li",{className:"navbar__item",children:Object(h.jsx)(x.b,{to:"/",className:"navbar__link",children:"Hill Charts"})}),Object(h.jsx)("li",{className:"navbar__item",children:Object(h.jsx)(x.b,{to:"/create",className:"navbar__link create",children:"Create"})})]})]})}),K=a(50),Z=a(22);!function(e){e.Inactive="inactive",e.Active="active",e.Complete="complete"}(k||(k={}));var G=a(11),W=function e(){Object(l.a)(this,e)};W.getPointAtPercentage=function(e,t){var a=e.getTotalLength()/100*t,n=e.getPointAtLength(a);return{x:n.x,y:n.y}},W.getClosestPoint=function(e,t){for(var a,n,r,c=e.getTotalLength(),s=8,i=0,l=1/0,o=0;o<=c;o+=s)(r=b(n=e.getPointAtLength(o)))<l&&(a=n,i=o,l=r);for(s/=2;s>.5;){var d,u=void 0,h=void 0,m=void 0,j=void 0,p=void 0;(d=i-s)>=0&&(j=b(u=e.getPointAtLength(d)))<l?(a=u,i=d,l=j):(m=i+s)<=c&&(p=b(h=e.getPointAtLength(m)))<l?(a=h,i=m,l=p):s/=2}return void 0!==a&&(a={x:a.x,y:a.y}),a;function b(e){var a=e.x-t[0],n=e.y-t[1];return a*a+n*n}},W.getStatusIndex=function(e){return{inactive:e.markers.filter((function(e){return e.status===k.Inactive})).findIndex((function(t){return t._id===e.marker._id})),complete:e.markers.filter((function(e){return e.status===k.Complete})).findIndex((function(t){return t._id===e.marker._id}))}},W.getPosition=function(e,t){var a={x:e.marker.x,y:e.marker.y};return void 0===a.x||void 0===a.y?e.marker.isNewPercentage&&(a=W.getPointAtPercentage(e.line,e.marker.percentage)):t.inactive>-1?a={x:110,y:50+30*t.inactive}:t.complete>-1&&(a={x:1e3,y:50+30*t.complete}),a},W.stackMarker=function(e,t){var a=e,n=t.filter((function(e){return e.x>=a.x-30&&e.x<=a.x+30&&e._id!==a._id}));if(n.length>0){var r,c=0,s=Object(Z.a)(n);try{for(s.s();!(r=s.n()).done;){r.value.y>c&&(c+=50)}}catch(i){s.e(i)}finally{s.f()}a.y=a.y-c}return a},W.onDrag=function(e,t){if(void 0!==e.selectedMarker&&e.marker._id===e.selectedMarker){var a=e.svg,n=G.d(t,a),r=W.getClosestPoint(e.line,n),c=Object(K.a)({},e.marker);c.x=r.x,c.y=r.y,r.x<101?c.status=k.Inactive:r.x>1099?c.status=k.Complete:c.status=k.Active,c=W.stackMarker(c,e.markers),e.updateMarker(c)}},W.onTouch=function(e,t){if(void 0!==e.selectedMarker&&e.marker._id===e.selectedMarker){var a=e.svg,n=G.e(t,a)[0],r=W.getClosestPoint(e.line,n),c=Object(K.a)({},e.marker);c.x=r.x,c.y=r.y,r.x<101?c.status=k.Inactive:r.x>1099?c.status=k.Complete:c.status=k.Active,e.updateMarker(c)}},W.setupMarker=function(e,t,a,n,r,c){if(t.on("touchmove",c),t.attr("transform","translate(".concat([n.x,n.y],")")),void 0!==e.marker.imagePath){var s=G.b().on("drag",r).touchable(!1);t.append("image").attr("width",26).attr("height",26).attr("class","image-marker").attr("transform","translate("+[-13,-13]+")").attr("xlink:href","".concat(_,"/").concat(e.marker.imagePath)).attr("preserveAspectRatio","none").attr("clip-path","url(#avatar-clip)").call(s)}else{var i=G.b().on("drag",r).touchable(!1);t.append("circle").attr("r",12).style("fill",e.marker.colour).call(i)}e.marker._id===e.selectedMarker&&t.append("circle").attr("r",14).attr("class","selected-marker").style("fill","none").style("stroke-width",2),a.inactive>-1||a.complete>-1?t.append("text").attr("transform","translate("+[20,5]+")").text(e.marker.name):t.append("text").attr("transform","translate("+[-13,-20]+")").text(e.marker.name)};a(181);var J=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).markerRef=r.a.createRef(),e.drag=function(t){return W.onDrag(e.props,t)},e.touch=function(t){return W.onTouch(e.props,t)},e.click=function(){return e.props.selectMarker(e.props.marker._id)},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=W.getStatusIndex(this.props),t=W.getPosition(this.props,e),a=Object(G.f)(this.markerRef.current);a.on("click",this.click),W.setupMarker(this.props,a,e,t,this.drag,this.touch)}},{key:"componentDidUpdate",value:function(){var e=W.getStatusIndex(this.props),t=W.getPosition(this.props,e),a=Object(G.f)(this.markerRef.current);this.props.marker.x=t.x,this.props.marker.y=t.y,this.props.marker.isNewPercentage=!1,a.selectAll("image").remove(),a.selectAll("text").remove(),a.selectAll("circle").remove(),W.setupMarker(this.props,a,e,t,this.drag,this.touch)}},{key:"render",value:function(){return Object(h.jsx)("g",{ref:this.markerRef})}}]),a}(r.a.Component);a(182);var Y,Q,X,$=function(e){var t=Object(n.useState)(null),a=Object(H.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(null),i=Object(H.a)(s,2),l=i[0],o=i[1];return Object(n.useEffect)((function(){var t=G.c().curve(G.a),a=G.f("#hill__svg");a.on("click",e.deselectMarker),a.append("defs").append("clipPath").attr("id","avatar-clip").append("circle").attr("cx",13).attr("cy",13).attr("r",12);var n=a.append("path").datum(e.points).attr("d",t).attr("id","hill__path");a.append("path").datum([[600,400],[600,120]]).attr("d",G.c()).attr("class","hill__line"),a.append("text").attr("transform","translate("+[100,20]+")").attr("class","hill__text").text("Inactive"),a.append("text").attr("transform","translate("+[990,20]+")").attr("class","hill__text").text("Complete"),c(a.node()),o(n.node())}),[]),Object(h.jsxs)("div",{className:"hill",children:[Object(h.jsx)("h1",{className:"hill__title",children:e.hill.name}),Object(h.jsx)("p",{className:"hill__subtitle",children:e.hill.description}),Object(h.jsx)("svg",{id:"hill__svg",width:e.size.width,height:e.size.height,children:e.markers.map((function(t){return Object(h.jsx)(J,{svg:r,line:l,marker:t,markers:e.markers,selectedMarker:e.selectedMarker,selectMarker:e.selectMarker,updateMarker:e.updateMarker},t._id)}))})]})},ee=function(e){return Object(h.jsxs)("svg",{className:"icon ".concat(e.className),fill:e.fill,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[Object(h.jsx)("path",{d:"M14.25 0H2.75C1.23 0 0 1.23 0 2.75v15.5C0 19.77 1.23 21 2.75 21h6.59a8.731 8.731 0 01-.84-3.75c0-1.15.22-2.25.63-3.26-.04.01-.08.01-.13.01H4c-.55 0-1-.45-1-1s.45-1 1-1h5c.38 0 .72.22.88.54A8.827 8.827 0 0112.36 10H4c-.55 0-1-.45-1-1s.45-1 1-1h9c.55 0 1 .45 1 1 0 .05 0 .09-.01.13.93-.38 1.95-.6 3.01-.62V2.75C17 1.23 15.77 0 14.25 0zM8 6H4c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1z"}),Object(h.jsx)("path",{d:"M17.25 10.5c-3.722 0-6.75 3.028-6.75 6.75S13.528 24 17.25 24 24 20.972 24 17.25s-3.028-6.75-6.75-6.75zM20 18.25h-1.75V20a1 1 0 01-2 0v-1.75H14.5a1 1 0 010-2h1.75V14.5a1 1 0 012 0v1.75H20a1 1 0 010 2z"})]})},te=["image/gif","image/jpeg","image/png"],ae=function(e){return Object(h.jsxs)("svg",{className:"icon ".concat(e.className),fill:e.fill,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 48",children:[Object(h.jsx)("path",{d:"M56 0H8a8 8 0 0 0-8 8v32a7.27 7.27 0 0 0 .48 2.64A8.05 8.05 0 0 0 4 46.91 8.1 8.1 0 0 0 8 48h48a8.08 8.08 0 0 0 6.72-3.65A8.18 8.18 0 0 0 64 40V8a8 8 0 0 0-8-8ZM33 42.67H8a2.35 2.35 0 0 1-.83-.16l14.48-19.76 11.87 11.86 3.76 3.76 4.27 4.3ZM58.67 40A2.68 2.68 0 0 1 56 42.67h-6.88l-8-8.06 6.82-6.74 10.78 12Zm0-8.13L50 22.21a2.72 2.72 0 0 0-1.89-.88 2.53 2.53 0 0 0-1.95.78l-8.82 8.74-14.11-14.08a2.84 2.84 0 0 0-2.11-.77 2.76 2.76 0 0 0-1.95 1.09L5.33 36V8A2.68 2.68 0 0 1 8 5.33h48A2.68 2.68 0 0 1 58.67 8Z"}),Object(h.jsx)("circle",{cx:"37.33",cy:"18.67",r:"5.33"})]})},ne=function(e){return Object(h.jsxs)("svg",{className:"icon ".concat(e.className),fill:e.fill,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 96 96",children:[Object(h.jsx)("path",{d:"M90 54a5.997 5.997 0 0 0-6 6v18H12V60a6 6 0 0 0-12 0v24a5.997 5.997 0 0 0 6 6h84a5.997 5.997 0 0 0 6-6V60a5.997 5.997 0 0 0-6-6Z"}),Object(h.jsx)("path",{d:"M34.242 34.242 42 26.484V60a6 6 0 0 0 12 0V26.484l7.758 7.758a6 6 0 0 0 8.484-8.484l-18-18a5.998 5.998 0 0 0-8.484 0l-18 18a6 6 0 0 0 8.484 8.484Z"})]})},re=(a(183),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).inputRef=r.a.createRef(),e.state={id:e.props.id,imageURI:"",hasImage:!(!e.props.imagePath||e.props.isNewImage),fileName:e.props.imagePath?e.props.imagePath.slice(8):""},e.createImage=function(){if(e.state.hasImage){if(""!==e.state.imageURI)return Object(h.jsx)("img",{className:"image-upload__image",src:e.state.imageURI,alt:e.props.alt});if(void 0!==e.props.imagePath)return Object(h.jsx)("img",{className:"image-upload__image",src:"".concat(_,"/").concat(e.props.imagePath),alt:e.props.alt})}return null},e.removeImage=function(){e.inputRef.current.value="",e.setState({imageURI:"",hasImage:!1,fileName:""}),void 0!==e.props.onChange&&(e.props.onChange(null),e.props.setIsNewImage(!0))},e.readURI=function(t){var a=new FileReader;a.onload=function(a){e.setState({imageURI:a.target.result,hasImage:!0,fileName:t.target.value.replace(/.*[/\\]/,"")})},a.readAsDataURL(t.target.files[0])},e.handleChange=function(t){if(t.target.files&&t.target.files[0]){var a=t.target.files[0].type;te.includes(a)&&(e.readURI(t),void 0!==e.props.onChange&&(e.props.onChange(t.target.files[0]),e.props.setIsNewImage(!0)))}},e.handleKeyUp=function(t){t.preventDefault(),"Enter"===t.key&&e.inputRef.current.click()},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.createImage();return Object(h.jsxs)("div",{className:"image-upload",children:[Object(h.jsxs)("div",{className:"image-upload__preview",children:[Object(h.jsx)(ae,{className:"image-upload__placeholder"}),t]}),Object(h.jsx)("label",{className:"image-upload__text",htmlFor:this.state.id,children:this.state.fileName}),this.state.hasImage?Object(h.jsx)("button",{className:"image-upload__remove",onClick:function(){return e.removeImage()},children:"\xd7"}):null,Object(h.jsx)("label",{className:"image-upload__button",tabIndex:0,htmlFor:this.state.id,onKeyUp:function(t){return e.handleKeyUp(t)},children:Object(h.jsx)(ne,{className:"image-upload__icon"})}),Object(h.jsx)("input",{className:"hide-visual",name:"image",tabIndex:-1,ref:this.inputRef,type:"file",id:this.state.id,onChange:function(t){return e.handleChange(t)}})]})}}]),a}(r.a.Component)),ce=a(89),se=a.n(ce),ie=(a(184),function(e){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.classList.add("notice__show")}),[]),Object(h.jsxs)("div",{ref:t,className:"notice ".concat(e.type),children:[Object(h.jsx)("div",{className:"notice__line ".concat(e.type)}),Object(h.jsxs)("div",{className:"notice__text-container",children:[Object(h.jsx)("div",{className:"notice__title ".concat(e.type),children:e.type}),Object(h.jsx)("p",{className:"notice__text",children:e.text})]})]})});!function(e){e.Information="information",e.Success="success",e.Warning="warning",e.Error="error",e.None=""}(Y||(Y={})),function(e){e.Gray="gray",e.Yellow="yellow",e.Orange="orange",e.Maroon="maroon",e.Red="red",e.Purple="purple",e.Fuchsia="fuchsia",e.Pink="pink",e.Green="green",e.Lime="lime",e.Olive="olive",e.Navy="navy",e.Blue="blue",e.Teal="teal",e.Aqua="aqua"}(Q||(Q={})),function(e){e.Add="add",e.Edit="edit",e.Delete="delete",e.None=""}(X||(X={}));a(185);var le=function(e){var t,a,r,c,s,i=Object(n.useState)((null===(t=e.marker)||void 0===t?void 0:t.name)||""),l=Object(H.a)(i,2),o=l[0],d=l[1],u=Object(n.useState)((null===(a=e.marker)||void 0===a?void 0:a.percentage)||"50"),m=Object(H.a)(u,2),j=m[0],p=m[1],b=Object(n.useState)((null===(r=e.marker)||void 0===r?void 0:r.colour)||Q.Gray),f=Object(H.a)(b,2),x=f[0],O=f[1],g=Object(n.useState)((null===(c=e.marker)||void 0===c?void 0:c.status)||k.Active),_=Object(H.a)(g,2),N=_[0],M=_[1],w=Object(n.useState)(null),y=Object(H.a)(w,2),C=y[0],S=y[1],R=Object(n.useState)(""),I=Object(H.a)(R,2),P=I[0],A=I[1],D=Object(n.useState)(!1),z=Object(H.a)(D,2),B=z[0],L=z[1],E=Object(n.useState)(Y.None),T=Object(H.a)(E,2),U=T[0],q=T[1],V=function(){return q(Y.None),!!o.trim()||(q(Y.Error),!1)},F=function(){document.querySelector("html").classList.toggle("scroll-lock"),e.selectModal(X.None)};return Object(h.jsxs)(v,{onSubmit:function(){return function(){var t;if(V()){var a=j!==(null===(t=e.marker)||void 0===t?void 0:t.percentage)||(e.marker.status===k.Complete||e.marker.status===k.Inactive)&&N===k.Active,n=new FormData;n.append("hillId",e.hillId),n.append("name",o),n.append("percentage",j.toString()),n.append("isNewPercentage",a.toString()),n.append("colour",x),n.append("status",N),null!==C&&n.append("image",C,P),void 0!==e.marker?(n.append("_id",e.marker._id),n.append("x",e.marker.x.toString()),n.append("y",e.marker.y.toString()),void 0!==e.marker.imagePath&&n.append("imagePath",e.marker.imagePath),e.update(e.marker._id,n,B),F()):(e.add(n),F()),e.selectModal(X.None)}}()},onClose:function(){return e.selectModal(X.None)},manualClose:!0,isShown:!0,trigger:e.buttonRef,text:{title:e.title,submit:"Save"},children:[Object(h.jsxs)("div",{className:"marker-modal__content",children:[Object(h.jsx)("label",{className:"marker-modal__label",children:"Marker image (optional): "}),Object(h.jsx)(re,{id:"marker-modal__upload",alt:"marker image",imagePath:null===(s=e.marker)||void 0===s?void 0:s.imagePath,isNewImage:B,setIsNewImage:L,onChange:function(e){null!==e?se.a.imageFileResizer(e,64,64,"PNG",100,0,(function(t){A(e.name),S(t)}),"blob"):S(null)}}),Object(h.jsx)("label",{className:"marker-modal__label",children:"Marker name: "}),Object(h.jsx)("input",{type:"text",className:"marker-modal__input",required:!0,value:o,onChange:function(e){return d(e.target.value)}}),Object(h.jsx)("label",{className:"marker-modal__label",children:"Marker percentage: "}),Object(h.jsx)("input",{type:"text",className:"marker-modal__input",required:!0,value:j,onChange:function(e){return p(e.target.value)}}),Object(h.jsx)("label",{className:"marker-modal__label",children:"Marker colour: "}),Object(h.jsx)("select",{className:"marker-modal__input",required:!0,value:x,onChange:function(e){return O(e.target.value)},children:Object.keys(Q).map((function(e){return Object(h.jsx)("option",{value:Q[e],style:{color:Q[e]},children:e},e)}))}),Object(h.jsx)("label",{className:"marker-modal__label",children:"Marker status: "}),Object(h.jsx)("select",{className:"marker-modal__input",required:!0,value:N,onChange:function(e){return M(e.target.value)},children:Object.keys(k).map((function(e){return Object(h.jsx)("option",{value:k[e],children:e},e)}))})]}),U!==Y.None?Object(h.jsx)(ie,{text:"Name field must not be empty",type:Y.Error}):null]})},oe=(a(186),function(e){switch(e.modal){case X.Add:return Object(h.jsx)(le,{title:"Add Marker",hillId:e.hillId,buttonRef:e.addButtonRef,add:e.add,update:e.update,selectModal:e.selectModal});case X.Edit:return Object(h.jsx)(le,{title:"Edit Marker",hillId:e.hillId,buttonRef:e.updateButtonRef,add:e.add,update:e.update,marker:e.marker,selectModal:e.selectModal});case X.Delete:return Object(h.jsx)(v,{onSubmit:function(){return e.delete(e.marker._id)},onClose:function(){return e.selectModal(X.None)},manualClose:!1,isShown:!0,trigger:e.deleteButtonRef,text:{title:"Delete Marker",submit:"Delete"},className:"delete",children:Object(h.jsxs)("p",{children:["Are you sure you want to delete ",Object(h.jsx)("b",{children:e.marker.name}),"?"]})});default:return null}}),de=(a(187),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).dropdownContentRef=r.a.createRef(),e.dropdownButtonRef=r.a.createRef(),e.addButtonRef=r.a.createRef(),e.editButtonRef=r.a.createRef(),e.deleteButtonRef=r.a.createRef(),e.state={activeModal:X.None},e.selectModal=function(t){return e.setState({activeModal:t})},e.openEditModal=function(t){e.toggleDropdown(),e.props.selectMarker(t),e.selectModal(X.Edit)},e.toggleDropdown=function(){var t,a=null===(t=e.dropdownContentRef.current)||void 0===t?void 0:t.style.display;e.dropdownContentRef.current.style.display="none"===a?"flex":"none"},e.hideDropdown=function(t){var a,n;(null===(a=e.dropdownContentRef.current)||void 0===a?void 0:a.contains(t.target))||(null===(n=e.dropdownContentRef.current)||void 0===n?void 0:n.contains(t.target))||(e.dropdownContentRef.current.style.display="none")},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.hideDropdown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.hideDropdown)}},{key:"render",value:function(){var e=this,t=!this.props.markers.some((function(t){return void 0!==e.props.selectedMarker&&t._id===e.props.selectedMarker})),a=0===this.props.markers.length,n=t&&!a?"dropdown__button disabled":"dropdown__button";return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"toolbar",children:[Object(h.jsxs)("button",{className:"toolbar__button",ref:this.addButtonRef,onClick:function(){return e.selectModal(X.Add)},children:[Object(h.jsx)(ee,{className:"toolbar__icon"})," Add"]}),Object(h.jsxs)("div",{className:"toolbar__edit",children:[Object(h.jsxs)("button",{className:"toolbar__edit-button",ref:this.editButtonRef,disabled:t,onClick:function(){return e.selectModal(X.Edit)},children:[Object(h.jsx)(j,{className:"toolbar__icon"}),Object(h.jsx)("span",{children:"Edit"})]}),Object(h.jsxs)("div",{className:"dropdown",children:[Object(h.jsx)("button",{className:n,disabled:a,ref:this.dropdownButtonRef,onClick:function(){return e.toggleDropdown()},children:"\u25bc"}),Object(h.jsx)("div",{className:"dropdown__content",style:{display:"none"},ref:this.dropdownContentRef,children:this.props.markers.map((function(t,a){return Object(h.jsxs)("button",{className:"dropdown__item",onClick:function(){return e.openEditModal(t._id)},children:[t.imagePath?Object(h.jsx)("img",{src:"".concat(_,"/").concat(t.imagePath),className:"dropdown__marker"}):Object(h.jsx)("div",{style:{backgroundColor:t.colour},className:"dropdown__marker"}),t.name]},a)}))})]})]}),Object(h.jsxs)("button",{className:"toolbar__button delete",ref:this.deleteButtonRef,disabled:t,onClick:function(){return e.selectModal(X.Delete)},children:[Object(h.jsx)(m,{className:"toolbar__icon"}),Object(h.jsx)("span",{children:"Delete"})]})]}),Object(h.jsx)(oe,{modal:this.state.activeModal,hillId:this.props.hillId,add:this.props.add,addButtonRef:this.addButtonRef,update:this.props.update,updateButtonRef:this.editButtonRef,delete:this.props.delete,deleteButtonRef:this.deleteButtonRef,marker:this.props.markers.find((function(t){return t._id===e.props.selectedMarker})),selectModal:this.selectModal})]})}}]),a}(r.a.Component)),ue=(a(188),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hill:A,markers:[],selectedMarker:"",isMarkerClick:!1},e.update=function(){return e.props.socket.emit("update-hill-markers",{room:e.props.id,markers:e.state.markers})},e.selectMarker=function(t){return e.setState({isMarkerClick:!0,selectedMarker:t})},e.deselectMarker=function(){e.state.isMarkerClick||e.setState({selectedMarker:""}),e.setState({isMarkerClick:!1})},e.addMarker=function(t){S(t).then((function(t){e.setState({markers:[].concat(Object(i.a)(e.state.markers),[t.data])},(function(){e.update()}))}))},e.updateMarkerWithForm=function(t,a,n){R(t,a,n).then((function(t){var a=Object(i.a)(e.state.markers),n=a.findIndex((function(e){return e._id===t.data._id}));a[n]=t.data,e.setState({markers:a},(function(){e.update()}))}))},e.updateMarker=function(t){var a=Object(i.a)(e.state.markers),n=a.findIndex((function(e){return e._id===t._id}));a[n]=t,e.setState({markers:a},(function(){e.update(),P(t._id,t)}))},e.deleteMarker=function(t){var a=Object(i.a)(e.state.markers),n=a.findIndex((function(e){return e._id===t}));a.splice(n,1),e.setState({markers:a},(function(){e.update(),I(t)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;this.props.socket.emit("hill-connect",this.props.id),this.props.socket.on("update-hill-markers",(function(e){return t.setState({markers:e})})),y(this.props.id).then((function(e){return t.setState({hill:e.data})})),(e=this.props.id,g.a.get("".concat(M,"/hill/").concat(e))).then((function(e){return t.setState({markers:e.data})}))}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)($,{hill:this.state.hill,markers:this.state.markers,selectedMarker:this.state.selectedMarker,updateMarker:this.updateMarker,selectMarker:this.selectMarker,deselectMarker:this.deselectMarker,size:{width:1200,height:450},points:[[100,400],[300,350],[600,120],[900,350],[1100,400]]}),Object(h.jsx)(de,{markers:this.state.markers,selectedMarker:this.state.selectedMarker,hillId:this.props.id,selectMarker:this.selectMarker,add:this.addMarker,update:this.updateMarkerWithForm,delete:this.deleteMarker})]})}}]),a}(r.a.Component)),he=a(90),me=(a(218),Object(he.io)("/"));var je=function(){return Object(h.jsx)(x.a,{children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(F,{}),Object(h.jsx)(z.d,{children:Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(z.b,{exact:!0,path:"/",children:Object(h.jsx)(D,{})}),Object(h.jsx)(z.b,{path:"/edit/:id",render:function(e){return Object(h.jsx)(L,{id:e.match.params.id})}}),Object(h.jsx)(z.b,{path:"/create",children:Object(h.jsx)(B,{})}),Object(h.jsx)(z.b,{path:"/hill/:id",render:function(e){return Object(h.jsx)(ue,{id:e.match.params.id,socket:me})}})]})})]})})},pe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,222)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};a(219);s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(je,{})}),document.getElementById("root")),pe()},23:function(e,t,a){}},[[220,1,2]]]);
//# sourceMappingURL=main.e0a2b487.chunk.js.map