(this["webpackJsonphill-chart"]=this["webpackJsonphill-chart"]||[]).push([[0],{148:function(e,t,a){},166:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a.n(r),n=a(83),s=a.n(n),l=(a(148),a(20)),i=a(4),o=a(5),d=a(6),u=a(7),h=a(19),m=a(26),j=a.n(m),p="https://pebbletor.herokuapp.com/hills",b=function(e,t){return j.a.post("".concat(p,"/update/").concat(e),t)},v=function(e){return j.a.delete("".concat(p,"/").concat(e))},f=(a(166),a(42),a(0)),O=function(e){return Object(f.jsx)("svg",{className:"icon ".concat(e.className),fill:e.fill,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(f.jsx)("path",{d:"M424 64h-88V48c0-26.51-21.49-48-48-48h-64c-26.51 0-48 21.49-48 48v16H88c-22.091 0-40 17.909-40 40v32c0 8.837 7.163 16 16 16h384c8.837 0 16-7.163 16-16v-32c0-22.091-17.909-40-40-40zM208 48c0-8.82 7.18-16 16-16h64c8.82 0 16 7.18 16 16v16h-96zM78.364 184a5 5 0 00-4.994 5.238l13.2 277.042c1.22 25.64 22.28 45.72 47.94 45.72h242.98c25.66 0 46.72-20.08 47.94-45.72l13.2-277.042a5 5 0 00-4.994-5.238zM320 224c0-8.84 7.16-16 16-16s16 7.16 16 16v208c0 8.84-7.16 16-16 16s-16-7.16-16-16zm-80 0c0-8.84 7.16-16 16-16s16 7.16 16 16v208c0 8.84-7.16 16-16 16s-16-7.16-16-16zm-80 0c0-8.84 7.16-16 16-16s16 7.16 16 16v208c0 8.84-7.16 16-16 16s-16-7.16-16-16z"})})},k=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).state={hills:[]},e.deleteHill=function(t){v(t).then((function(){var a=e.state.hills.filter((function(e){return e._id!==t}));e.setState({hills:a})}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.a.get(p).then((function(t){return e.setState({hills:[].concat(Object(l.a)(e.state.hills),Object(l.a)(t.data))})}))}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"home",children:[Object(f.jsx)("h1",{className:"home__title",children:"Showing all hill charts"}),this.state.hills.map((function(t,a){return Object(f.jsxs)("div",{className:"card hill-card",children:[Object(f.jsx)(h.b,{to:"/hill/".concat(t._id),className:"hill-card__link",children:Object(f.jsx)("h1",{children:t.name})}),Object(f.jsxs)("p",{className:"hill-card__author",children:["by ",t.author]}),Object(f.jsx)("p",{className:"hill-card__description",children:t.description}),Object(f.jsxs)("div",{className:"hill-card__data",children:[Object(f.jsxs)("div",{className:"hill-card__dates",children:[Object(f.jsxs)("p",{className:"hill-card__date",children:["Created ",new Date(t.createdAt).toUTCString()]}),t.updatedAt&&Object(f.jsxs)("p",{className:"hill-card__date",children:["Last updated ",new Date(t.updatedAt).toUTCString()]})]}),Object(f.jsx)("button",{onClick:function(){return e.deleteHill(t._id)},className:"hill-card__delete",children:Object(f.jsx)(O,{})})]})]},a)}))]})}}]),a}(c.a.Component),x=a(8),_=a(2),g=(a(172),function(){var e=Object(r.useState)(""),t=Object(x.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)(""),s=Object(x.a)(n,2),l=s[0],i=s[1],o=Object(r.useState)(""),d=Object(x.a)(o,2),u=d[0],h=d[1],m=Object(r.useState)(!1),b=Object(x.a)(m,2),v=b[0],O=b[1];return v?Object(f.jsx)(_.a,{to:"/"}):Object(f.jsxs)("div",{className:"create",children:[Object(f.jsx)("h1",{className:"create__title",children:"Create a hill chart"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t;(t={name:a,description:l,author:u,markers:[]},j.a.post("".concat(p,"/add"),t)).then((function(e){O(!0)}))},className:"card create__form",children:[Object(f.jsx)("label",{className:"create__label",children:"Hill chart name: "}),Object(f.jsx)("input",{type:"text",className:"create__input",required:!0,value:a,onChange:function(e){return c(e.target.value)}}),Object(f.jsx)("label",{className:"create__label",children:"Hill chart description: "}),Object(f.jsx)("textarea",{className:"create__input",required:!0,value:l,onChange:function(e){return i(e.target.value)}}),Object(f.jsx)("label",{className:"create__label",children:"Hill chart author: "}),Object(f.jsx)("input",{type:"text",className:"create__input",required:!0,value:u,onChange:function(e){return h(e.target.value)}}),Object(f.jsx)("span",{children:Object(f.jsx)("button",{className:"create__save",type:"submit",children:"Save"})})]})]})}),N=(a(173),function(){var e=Object(r.useState)(""),t=Object(x.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)(""),s=Object(x.a)(n,2),l=s[0],i=s[1],o=Object(r.useState)(""),d=Object(x.a)(o,2),u=d[0],h=d[1];return Object(f.jsxs)("div",{className:"create",children:[Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:a,description:l,author:u,markers:[]};console.log(t)},children:[Object(f.jsx)("label",{children:"Hill chart name: "}),Object(f.jsx)("input",{type:"text",required:!0,value:a,onChange:function(e){return c(e.target.value)}}),Object(f.jsx)("label",{children:"Hill chart description: "}),Object(f.jsx)("textarea",{required:!0,value:l,onChange:function(e){return i(e.target.value)}}),Object(f.jsx)("label",{children:"Hill chart author: "}),Object(f.jsx)("input",{type:"text",required:!0,value:u,onChange:function(e){return h(e.target.value)}}),Object(f.jsx)("button",{type:"submit",children:"Save"})]}),Object(f.jsx)("p",{children:a}),Object(f.jsx)("p",{children:l}),Object(f.jsx)("p",{children:u})]})}),M=(a(174),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).state={checked:!0},e.setTheme=function(t){"light-theme"===t?e.setState({checked:!1}):e.setState({checked:!0}),localStorage.setItem("theme",t),document.querySelector("body").className=t},e.onClick=function(){var t=!e.state.checked?"dark-theme":"light-theme";e.setTheme(t)},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){"dark-theme"===localStorage.getItem("theme")?this.setTheme("dark-theme"):this.setTheme("light-theme")}},{key:"render",value:function(){return this.state.checked?Object(f.jsx)("div",{className:"theme-switch",children:Object(f.jsx)("button",{className:"theme-switch--button",onClick:this.onClick,children:Object(f.jsx)("svg",{className:"theme-switch--icon-sun",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 302.4 302.4",children:Object(f.jsx)("path",{d:"M204.8 97.6C191.2 84 172 75.2 151.2 75.2s-40 8.4-53.6 22.4c-13.6 13.6-22.4 32.8-22.4 53.6s8.8 40 22.4 53.6c13.6 13.6 32.8 22.4 53.6 22.4s40-8.4 53.6-22.4c13.6-13.6 22.4-32.8 22.4-53.6s-8.4-40-22.4-53.6zm-14.4 92.8c-10 10-24 16-39.2 16s-29.2-6-39.2-16-16-24-16-39.2 6-29.2 16-39.2 24-16 39.2-16 29.2 6 39.2 16 16 24 16 39.2-6 29.2-16 39.2zM292 140.8h-30.8c-5.6 0-10.4 4.8-10.4 10.4 0 5.6 4.8 10.4 10.4 10.4H292c5.6 0 10.4-4.8 10.4-10.4 0-5.6-4.8-10.4-10.4-10.4zM151.2 250.8c-5.6 0-10.4 4.8-10.4 10.4V292c0 5.6 4.8 10.4 10.4 10.4 5.6 0 10.4-4.8 10.4-10.4v-30.8c0-5.6-4.8-10.4-10.4-10.4zM258 243.6l-22-22c-3.6-4-10.4-4-14.4 0s-4 10.4 0 14.4l22 22c4 4 10.4 4 14.4 0s4-10.4 0-14.4zM151.2 0c-5.6 0-10.4 4.8-10.4 10.4v30.8c0 5.6 4.8 10.4 10.4 10.4 5.6 0 10.4-4.8 10.4-10.4V10.4c0-5.6-4.8-10.4-10.4-10.4zM258.4 44.4c-4-4-10.4-4-14.4 0l-22 22c-4 4-4 10.4 0 14.4 3.6 4 10.4 4 14.4 0l22-22c4-4 4-10.4 0-14.4zM41.2 140.8H10.4c-5.6 0-10.4 4.8-10.4 10.4s4.4 10.4 10.4 10.4h30.8c5.6 0 10.4-4.8 10.4-10.4 0-5.6-4.8-10.4-10.4-10.4zM80.4 221.6c-3.6-4-10.4-4-14.4 0l-22 22c-4 4-4 10.4 0 14.4s10.4 4 14.4 0l22-22c4-4 4-10.4 0-14.4zM80.4 66.4l-22-22c-4-4-10.4-4-14.4 0s-4 10.4 0 14.4l22 22c4 4 10.4 4 14.4 0s4-10.4 0-14.4z"})})})}):Object(f.jsx)("div",{className:"theme-switch",children:Object(f.jsx)("button",{className:"theme-switch--button",onClick:this.onClick,children:Object(f.jsx)("svg",{className:"theme-switch--icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.001 512.001",children:Object(f.jsx)("path",{d:"M470.218 159.659c-25.647-63.265-74.558-112.8-137.723-139.482C292.332 3.211 248.327-3.24 205.246 1.525c-18.368 2.031-32.9 15.609-36.161 33.787-3.253 18.138 5.634 35.881 22.115 44.151 31.723 15.917 56.581 42.823 69.997 75.762 30.531 74.958-5.539 160.805-80.403 191.367-32.893 13.427-69.478 14.45-103.019 2.88-17.422-6.01-36.334.042-47.056 15.061-10.702 14.991-10.283 34.805 1.04 49.306 26.682 34.168 62.01 61.167 102.167 78.08C165.931 505.399 199.648 512 233.149 512c57.539-.001 114.432-19.478 160.852-57.037 8.587-6.948 9.917-19.542 2.968-28.13-6.948-8.589-19.543-9.916-28.13-2.968-61.963 50.137-146.025 62.086-219.386 31.189-33.879-14.269-63.675-37.034-86.165-65.835-.396-.507-.544-.697-.011-1.443.567-.795.864-.691 1.454-.487 42.714 14.734 89.302 13.434 131.18-3.661 95.269-38.892 141.175-148.121 102.332-243.492-17.073-41.917-48.717-76.162-89.104-96.427-.598-.299-.845-.423-.682-1.335.176-.978.534-1.017 1.184-1.089 36.303-4.014 73.405 1.429 107.287 15.742 53.315 22.52 94.587 64.307 116.216 117.66 21.631 53.358 21.12 112.131-1.438 165.493a220.025 220.025 0 01-3.42 7.677c-4.687 10.004-.378 21.911 9.626 26.599 10.004 4.686 21.911.375 26.598-9.626a262.49 262.49 0 004.042-9.073c26.717-63.2 27.309-132.842 1.666-196.098z"})})})})}}]),a}(c.a.Component)),w=(a(175),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(f.jsxs)("nav",{className:"navbar",children:[Object(f.jsx)(h.b,{to:"/",className:"navbar__brand",children:"PEBBLETOR"}),Object(f.jsxs)("ul",{className:"navbar__nav",children:[Object(f.jsx)("li",{className:"navbar__item",children:Object(f.jsx)(M,{})}),Object(f.jsx)("li",{className:"navbar__item",children:Object(f.jsx)(h.b,{to:"/",className:"navbar__link",children:"Hill Charts"})}),Object(f.jsx)("li",{className:"navbar__item",children:Object(f.jsx)(h.b,{to:"/create",className:"navbar__link create",children:"Create"})})]})]})}}]),a}(c.a.Component)),C=a(36),y=a(32),S=function e(){Object(i.a)(this,e)};S.getPointAtPercentage=function(e,t){var a=e.getTotalLength()/100*t,r=e.getPointAtLength(a);return[r.x,r.y]},S.getClosestPoint=function(e,t){for(var a,r,c,n,s,l=e.getTotalLength(),i=8,o=0,d=1/0,u=0;u<=l;u+=i)(s=f(n=e.getPointAtLength(u)))<d&&(c=n,o=u,d=s);for(i/=2;i>.5;){var h,m,j,p,b,v;j=o-i,b=f(h=e.getPointAtLength(j)),j>=0&&b<d?(c=h,o=j,d=b):(p=o+i)<=l&&(v=f(m=e.getPointAtLength(p)))<d?(c=m,o=p,d=v):i/=2}return c=[null===(a=c)||void 0===a?void 0:a.x,null===(r=c)||void 0===r?void 0:r.y];function f(e){var a=e.x-t[0],r=e.y-t[1];return a*a+r*r}};var A,z=a(13);a(177);!function(e){e.Inactive="inactive",e.Active="active",e.Complete="complete"}(A||(A={}));var P,D=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).markerRef=c.a.createRef(),r.drag=r.drag.bind(Object(y.a)(r)),r.click=r.click.bind(Object(y.a)(r)),r}return Object(o.a)(a,[{key:"drag",value:function(e){if(void 0!==this.props.selectedMarker&&this.props.marker.id===this.props.selectedMarker.id){var t=this.props.svg,a=z.d(e,t),r=S.getClosestPoint(this.props.line,a),c=Object(C.a)({},this.props.marker);c.currentPos=r,r[0]<101?c.status=A.Inactive:r[0]>1099?c.status=A.Complete:c.status=A.Active,this.props.updateMarker(c)}}},{key:"click",value:function(){this.props.selectMarker(this.props.marker)}},{key:"componentDidMount",value:function(){var e=this,t=z.b().on("drag",this.drag),a=this.props.marker.currentPos;0===a.length&&(a=S.getPointAtPercentage(this.props.line,this.props.marker.percentage));var r=this.props.markers.filter((function(e){return e.status===A.Inactive})).findIndex((function(t){return t.id===e.props.marker.id}));r>-1&&(a=[110,70+50*r]);var c=this.props.markers.filter((function(e){return e.status===A.Complete})).findIndex((function(t){return t.id===e.props.marker.id}));c>-1&&(a=[1e3,70+50*c]);var n=z.e(this.markerRef.current).attr("transform","translate("+a+")");n.append("circle").attr("r",10).style("fill",this.props.marker.colour).call(t),n.append("text").attr("transform","translate("+[-10,-20]+")").text(this.props.marker.name),n.on("click",this.click)}},{key:"componentDidUpdate",value:function(){var e=this,t=z.b().on("drag",this.drag),a=z.e(this.markerRef.current);a.selectAll("text").remove(),a.selectAll("circle").remove(),a.append("circle").attr("r",10).style("fill",this.props.marker.colour).call(t),this.props.marker.id===this.props.selectedMarker.id&&a.append("circle").attr("r",12).attr("class","selected-marker").style("fill","none").style("stroke-width",2),a.append("text").attr("transform","translate("+[-10,-20]+")").text(this.props.marker.name);var r=this.props.markers.filter((function(e){return e.status===A.Inactive})).findIndex((function(t){return t.id===e.props.marker.id})),c=this.props.marker.currentPos;r>-1&&(c=[110,70+50*r]);var n=this.props.markers.filter((function(e){return e.status===A.Complete})).findIndex((function(t){return t.id===e.props.marker.id}));n>-1&&(c=[1e3,70+50*n]),0!==this.props.marker.currentPos.length&&(this.props.marker.isNewPercentage&&(c=S.getPointAtPercentage(this.props.line,this.props.marker.percentage)),a.attr("transform","translate("+c+")")),this.props.marker.currentPos=c,this.props.marker.isNewPercentage=!1}},{key:"render",value:function(){return Object(f.jsx)("g",{ref:this.markerRef})}}]),a}(c.a.Component),H=function(e){return Object(f.jsxs)("svg",{className:"icon ".concat(e.className),fill:e.fill,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[Object(f.jsx)("path",{d:"M14.25 0H2.75C1.23 0 0 1.23 0 2.75v15.5C0 19.77 1.23 21 2.75 21h6.59a8.731 8.731 0 01-.84-3.75c0-1.15.22-2.25.63-3.26-.04.01-.08.01-.13.01H4c-.55 0-1-.45-1-1s.45-1 1-1h5c.38 0 .72.22.88.54A8.827 8.827 0 0112.36 10H4c-.55 0-1-.45-1-1s.45-1 1-1h9c.55 0 1 .45 1 1 0 .05 0 .09-.01.13.93-.38 1.95-.6 3.01-.62V2.75C17 1.23 15.77 0 14.25 0zM8 6H4c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1z"}),Object(f.jsx)("path",{d:"M17.25 10.5c-3.722 0-6.75 3.028-6.75 6.75S13.528 24 17.25 24 24 20.972 24 17.25s-3.028-6.75-6.75-6.75zM20 18.25h-1.75V20a1 1 0 01-2 0v-1.75H14.5a1 1 0 010-2h1.75V14.5a1 1 0 012 0v1.75H20a1 1 0 010 2z"})]})},R=function(e){return Object(f.jsxs)("svg",{className:"icon ".concat(e.className),fill:e.fill,viewBox:"0 0 512 511",xmlns:"http://www.w3.org/2000/svg",children:[Object(f.jsx)("path",{d:"M405.332 256.484c-11.797 0-21.332 9.559-21.332 21.332v170.668c0 11.754-9.559 21.332-21.332 21.332H64c-11.777 0-21.332-9.578-21.332-21.332V149.816c0-11.754 9.555-21.332 21.332-21.332h170.668c11.797 0 21.332-9.558 21.332-21.332 0-11.777-9.535-21.336-21.332-21.336H64c-35.285 0-64 28.715-64 64v298.668c0 35.286 28.715 64 64 64h298.668c35.285 0 64-28.714 64-64V277.816c0-11.796-9.54-21.332-21.336-21.332zm0 0"}),Object(f.jsx)("path",{d:"M200.02 237.05a10.793 10.793 0 00-2.922 5.438l-15.082 75.438c-.703 3.496.406 7.101 2.922 9.64a10.673 10.673 0 007.554 3.114c.68 0 1.387-.063 2.09-.211l75.414-15.082c2.09-.43 3.988-1.43 5.461-2.926l168.79-168.79-75.415-75.41zm0 0M496.383 16.102c-20.797-20.801-54.633-20.801-75.414 0l-29.524 29.523 75.414 75.414 29.524-29.527C506.453 81.465 512 68.066 512 53.816s-5.547-27.648-15.617-37.714zm0 0"})]})},I=(a(178),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).dropdownContentRef=c.a.createRef(),e.dropdownButtonRef=c.a.createRef(),e.edit=function(t){e.toggleDropdown(),e.props.selectMarker(t),e.props.selectModal("edit")},e.toggleDropdown=function(){var t,a=null===(t=e.dropdownContentRef.current)||void 0===t?void 0:t.style.display;e.dropdownContentRef.current.style.display="none"===a?"flex":"none"},e.hideDropdown=function(t){var a,r;(null===(a=e.dropdownContentRef.current)||void 0===a?void 0:a.contains(t.target))||(null===(r=e.dropdownContentRef.current)||void 0===r?void 0:r.contains(t.target))||(e.dropdownContentRef.current.style.display="none")},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.hideDropdown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.hideDropdown)}},{key:"render",value:function(){var e=this,t=!this.props.markers.some((function(t){return void 0!==e.props.selectedMarker&&t.id===e.props.selectedMarker.id})),a=0===this.props.markers.length,r=t&&!a?"dropdown__button disabled":"dropdown__button";return Object(f.jsxs)("div",{className:"toolbar",children:[Object(f.jsxs)("button",{className:"toolbar__button",onClick:function(){return e.props.selectModal("add")},children:[Object(f.jsx)(H,{className:"toolbar__icon"})," Add"]}),Object(f.jsxs)("div",{className:"toolbar__edit",children:[Object(f.jsxs)("button",{className:"toolbar__edit-button",disabled:t,onClick:function(){return e.props.selectModal("edit")},children:[Object(f.jsx)(R,{className:"toolbar__icon"}),Object(f.jsx)("span",{children:"Edit"})]}),Object(f.jsxs)("div",{className:"dropdown",children:[Object(f.jsx)("button",{className:r,disabled:a,ref:this.dropdownButtonRef,onClick:function(){return e.toggleDropdown()},children:"\u25bc"}),Object(f.jsx)("div",{className:"dropdown__content",style:{display:"none"},ref:this.dropdownContentRef,children:this.props.markers.map((function(t,a){return Object(f.jsxs)("button",{className:"dropdown__item",onClick:function(){return e.edit({id:t.id,name:t.name})},children:[Object(f.jsx)("div",{style:{backgroundColor:t.colour},className:"dropdown__marker"}),t.name]},a)}))})]})]}),Object(f.jsxs)("button",{className:"toolbar__button delete",disabled:t,onClick:function(){return e.props.selectModal("delete")},children:[Object(f.jsx)(O,{className:"toolbar__icon"}),Object(f.jsx)("span",{children:"Delete"})]})]})}}]),a}(c.a.Component));!function(e){e.Gray="gray",e.Yellow="yellow",e.Orange="orange",e.Maroon="maroon",e.Red="red",e.Purple="purple",e.Fuchsia="fuchsia",e.Pink="pink",e.Green="green",e.Lime="lime",e.Olive="olive",e.Navy="navy",e.Blue="blue",e.Teal="teal",e.Aqua="aqua"}(P||(P={}));a(179);var q=function(e){var t,a,c,n,s=Object(r.useState)((null===(t=e.marker)||void 0===t?void 0:t.name)||""),l=Object(x.a)(s,2),i=l[0],o=l[1],d=Object(r.useState)((null===(a=e.marker)||void 0===a?void 0:a.percentage)||"50"),u=Object(x.a)(d,2),h=u[0],m=u[1],j=Object(r.useState)((null===(c=e.marker)||void 0===c?void 0:c.colour)||P.Gray),p=Object(x.a)(j,2),b=p[0],v=p[1],O=Object(r.useState)((null===(n=e.marker)||void 0===n?void 0:n.status)||A.Active),k=Object(x.a)(O,2),_=k[0],g=k[1];return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"modal-form__header",children:[Object(f.jsx)("h2",{className:"modal-form__header-title",children:e.title}),Object(f.jsx)("button",{className:"modal-form__header-close",onClick:function(){return e.selectModal("")},children:"x"})]}),Object(f.jsxs)("form",{onSubmit:function(t){var a,r,c;t.preventDefault();var n={id:(null===(a=e.marker)||void 0===a?void 0:a.id)||Date.now().toString(),name:i,percentage:parseInt(h.toString()),isNewPercentage:h!==(null===(r=e.marker)||void 0===r?void 0:r.percentage)||(e.marker.status===A.Complete||e.marker.status===A.Inactive)&&_===A.Active,currentPos:(null===(c=e.marker)||void 0===c?void 0:c.currentPos)||[],colour:b,status:_};void 0===e.marker?e.add(n):e.update(n),e.selectModal("")},className:"modal-form__content",children:[Object(f.jsx)("label",{className:"modal-form__label",children:"Marker name: "}),Object(f.jsx)("input",{type:"text",className:"modal-form__input",required:!0,value:i,onChange:function(e){return o(e.target.value)}}),Object(f.jsx)("label",{className:"modal-form__label",children:"Marker percentage: "}),Object(f.jsx)("input",{type:"text",className:"modal-form__input",required:!0,value:h,onChange:function(e){return m(e.target.value)}}),Object(f.jsx)("label",{className:"modal-form__label",children:"Marker colour: "}),Object(f.jsx)("select",{className:"modal-form__input",required:!0,value:b,onChange:function(e){return v(e.target.value)},children:Object.keys(P).map((function(e){return Object(f.jsx)("option",{value:P[e],style:{color:P[e]},children:e})}))}),Object(f.jsx)("label",{className:"modal-form__label",children:"Marker status: "}),Object(f.jsx)("select",{className:"modal-form__input",required:!0,value:_,onChange:function(e){return g(e.target.value)},children:Object.keys(A).map((function(e){return Object(f.jsx)("option",{value:A[e],children:e})}))}),Object(f.jsxs)("div",{className:"modal-form__content-buttons",children:[Object(f.jsx)("button",{className:"modal-form__button",onClick:function(){return e.selectModal("")},children:"Cancel"}),Object(f.jsx)("button",{className:"modal-form__button save",type:"submit",children:"Save"})]})]})]})},L=(a(180),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;switch(this.props.modal){case"add":return Object(f.jsx)("div",{className:"modal",children:Object(f.jsx)("div",{className:"modal__card",children:Object(f.jsx)(q,{title:"Add Marker",add:this.props.add,update:this.props.update,selectModal:this.props.selectModal})})});case"edit":return Object(f.jsx)("div",{className:"modal",children:Object(f.jsx)("div",{className:"modal__card",children:Object(f.jsx)(q,{title:"Edit Marker",add:this.props.add,update:this.props.update,marker:this.props.marker,selectModal:this.props.selectModal})})});case"delete":return Object(f.jsx)("div",{className:"modal",children:Object(f.jsxs)("div",{className:"modal__card",children:[Object(f.jsxs)("div",{className:"modal-form__header",children:[Object(f.jsx)("h2",{className:"modal-form__header-title",children:"Delete Marker"}),Object(f.jsx)("button",{className:"modal-form__header-close",onClick:function(){return e.props.selectModal("")},children:"x"})]}),Object(f.jsxs)("div",{className:"modal-form__content",children:[Object(f.jsxs)("p",{className:"modal-form__text",children:["Are you sure you want to delete '",this.props.marker.name,"'?"]}),Object(f.jsxs)("div",{className:"modal-form__content-buttons",children:[Object(f.jsx)("button",{className:"modal-form__button",onClick:function(){return e.props.selectModal("")},children:"Cancel"}),Object(f.jsx)("button",{className:"modal-form__button delete",onClick:function(){e.props.delete(e.props.marker.id),e.props.selectModal("")},children:"Delete"})]})]})]})});default:return Object(f.jsx)(f.Fragment,{})}}}]),a}(c.a.Component)),B={_id:"",name:"",description:"",author:"",markers:[],createdAt:0,updatedAt:0},T=(a(181),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).state={svg:null,line:null,hill:B,markers:[],activeModal:"",selectedMarker:{id:"",name:""},isMarkerClick:!1,lastCall:0},e.update=function(){var t=+new Date;if(t-e.state.lastCall>100){e.setState({lastCall:t});var a=Object(C.a)({},e.state.hill);a.markers=Object(l.a)(e.state.markers),e.props.socket.emit("update-hill-markers",{room:e.props.id,markers:e.state.markers}),b(e.props.id,a)}},e.deselectMarker=function(){e.state.isMarkerClick||e.setState({selectedMarker:{id:"",name:""}}),e.setState({isMarkerClick:!1})},e.selectMarker=function(t){e.setState({isMarkerClick:!0,selectedMarker:t})},e.addMarker=function(t){e.setState({markers:[].concat(Object(l.a)(e.state.markers),[t])},(function(){e.update()}))},e.updateMarker=function(t){var a=Object(l.a)(e.state.markers),r=a.findIndex((function(e){return e.id===t.id}));a[r]=t,e.setState({markers:a},(function(){e.update()}))},e.deleteMarker=function(t){var a=Object(l.a)(e.state.markers),r=a.findIndex((function(e){return e.id===t}));a.splice(r,1),e.setState({markers:a},(function(){e.update()}))},e.selectModal=function(t){e.setState({activeModal:t})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.emit("hill-connect",this.props.id),this.props.socket.on("update-hill-markers",(function(t){return e.setState({markers:t})}));var t=z.c().curve(z.a),a=z.e("#hill__svg");a.on("click",this.deselectMarker);var r,c=a.append("path").datum(this.props.points).attr("d",t).attr("id","hill__path");a.append("path").datum([[600,400],[600,120]]).attr("d",z.c()).attr("class","hill__line"),a.append("text").attr("transform","translate("+[100,20]+")").attr("class","hill__text").text("Inactive"),a.append("text").attr("transform","translate("+[990,20]+")").attr("class","hill__text").text("Complete"),this.setState({svg:a.node(),line:c.node()}),(r=this.props.id,j.a.get("".concat(p,"/").concat(r))).then((function(t){e.setState({hill:t.data}),e.setState({markers:t.data.markers})}))}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"hill",children:[Object(f.jsx)("h1",{className:"hill__title",children:this.state.hill.name}),Object(f.jsx)("p",{className:"hill__subtitle",children:this.state.hill.description}),Object(f.jsx)("svg",{id:"hill__svg",width:this.props.size.width,height:this.props.size.height,children:this.state.markers.map((function(t){return Object(f.jsx)(D,{svg:e.state.svg,line:e.state.line,marker:t,markers:e.state.markers,selectedMarker:e.state.selectedMarker,selectMarker:e.selectMarker,updateMarker:e.updateMarker},t.id)}))}),Object(f.jsx)(I,{markers:this.state.markers,selectedMarker:this.state.selectedMarker,selectMarker:this.selectMarker,selectModal:this.selectModal}),Object(f.jsx)(L,{modal:this.state.activeModal,add:this.addMarker,update:this.updateMarker,delete:this.deleteMarker,marker:this.state.markers.find((function(t){return t.id===e.state.selectedMarker.id})),selectModal:this.selectModal})]})}}]),a}(c.a.Component)),V=(a(182),a(87)),E=Object(V.io)("/");var F=function(){return Object(f.jsx)(h.a,{children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(w,{}),Object(f.jsx)(_.d,{children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(_.b,{exact:!0,path:"/",children:Object(f.jsx)(k,{})}),Object(f.jsx)(_.b,{path:"/edit/:id",children:Object(f.jsx)(N,{})}),Object(f.jsx)(_.b,{path:"/create",children:Object(f.jsx)(g,{})}),Object(f.jsx)(_.b,{path:"/hill/:id",render:function(e){return Object(f.jsx)(T,{size:{width:1200,height:450},points:[[100,400],[300,350],[600,120],[900,350],[1100,400]],id:e.match.params.id,socket:E})}})]})})]})})},U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,213)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),r(e),c(e),n(e),s(e)}))};s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(F,{})}),document.getElementById("root")),U()},42:function(e,t,a){}},[[212,1,2]]]);
//# sourceMappingURL=main.fe41f530.chunk.js.map