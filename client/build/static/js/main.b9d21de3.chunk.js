(this["webpackJsonphill-chart"]=this["webpackJsonphill-chart"]||[]).push([[0],{152:function(e,t,a){},171:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(33),s=a.n(c),l=a(21),i=a(4),o=a(6),d=a(7),u=a(8),h=(a(30),a(0)),m=function(e){return Object(h.jsx)("svg",{className:"icon ".concat(e.className),fill:e.fill,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(h.jsx)("path",{d:"M424 64h-88V48c0-26.51-21.49-48-48-48h-64c-26.51 0-48 21.49-48 48v16H88c-22.091 0-40 17.909-40 40v32c0 8.837 7.163 16 16 16h384c8.837 0 16-7.163 16-16v-32c0-22.091-17.909-40-40-40zM208 48c0-8.82 7.18-16 16-16h64c8.82 0 16 7.18 16 16v16h-96zM78.364 184a5 5 0 00-4.994 5.238l13.2 277.042c1.22 25.64 22.28 45.72 47.94 45.72h242.98c25.66 0 46.72-20.08 47.94-45.72l13.2-277.042a5 5 0 00-4.994-5.238zM320 224c0-8.84 7.16-16 16-16s16 7.16 16 16v208c0 8.84-7.16 16-16 16s-16-7.16-16-16zm-80 0c0-8.84 7.16-16 16-16s16 7.16 16 16v208c0 8.84-7.16 16-16 16s-16-7.16-16-16zm-80 0c0-8.84 7.16-16 16-16s16 7.16 16 16v208c0 8.84-7.16 16-16 16s-16-7.16-16-16z"})})},j=function(e){return Object(h.jsxs)("svg",{className:"icon ".concat(e.className),fill:e.fill,viewBox:"0 0 512 511",xmlns:"http://www.w3.org/2000/svg",children:[Object(h.jsx)("path",{d:"M405.332 256.484c-11.797 0-21.332 9.559-21.332 21.332v170.668c0 11.754-9.559 21.332-21.332 21.332H64c-11.777 0-21.332-9.578-21.332-21.332V149.816c0-11.754 9.555-21.332 21.332-21.332h170.668c11.797 0 21.332-9.558 21.332-21.332 0-11.777-9.535-21.336-21.332-21.336H64c-35.285 0-64 28.715-64 64v298.668c0 35.286 28.715 64 64 64h298.668c35.285 0 64-28.714 64-64V277.816c0-11.796-9.54-21.332-21.336-21.332zm0 0"}),Object(h.jsx)("path",{d:"M200.02 237.05a10.793 10.793 0 00-2.922 5.438l-15.082 75.438c-.703 3.496.406 7.101 2.922 9.64a10.673 10.673 0 007.554 3.114c.68 0 1.387-.063 2.09-.211l75.414-15.082c2.09-.43 3.988-1.43 5.461-2.926l168.79-168.79-75.415-75.41zm0 0M496.383 16.102c-20.797-20.801-54.633-20.801-75.414 0l-29.524 29.523 75.414 75.414 29.524-29.527C506.453 81.465 512 68.066 512 53.816s-5.547-27.648-15.617-37.714zm0 0"})]})},b=a(87),p=a.n(b),f=(a(152),function(e){var t="modal__button highlight ".concat(e.className);return s.a.createPortal(Object(h.jsx)(p.a,{children:Object(h.jsx)("aside",{role:"dialog",tabIndex:-1,"aria-modal":"true",className:"modal",onClick:function(t){return e.onClickOutside(t)},onKeyDown:function(t){return e.onKeyDown(t)},children:Object(h.jsxs)("div",{className:"modal__card",ref:e.modalRef,children:[Object(h.jsxs)("div",{className:"modal__header",children:[Object(h.jsx)("h2",{className:"modal__header-title",children:e.text.title}),Object(h.jsx)("button",{ref:e.closeRef,className:"modal__header-close","aria-label":"Close Modal","aria-labelledby":"close-modal",onClick:function(){return e.closeModal()},children:"x"}),Object(h.jsx)("span",{id:"close-modal",className:"hide-visual",children:"Close"})]}),Object(h.jsx)("div",{className:"modal__content",children:e.children}),Object(h.jsxs)("div",{className:"modal__footer",children:[Object(h.jsx)("button",{className:"modal__button",onClick:function(){return e.closeModal()},children:"Cancel"}),Object(h.jsx)("button",{className:t,onClick:function(){e.onSubmit(),e.closeModal()},children:e.text.submit})]})]})})}),document.body)}),v=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).modalRef=r.a.createRef(),e.closeRef=r.a.createRef(),e.toggleScrollLock=function(){document.querySelector("html").classList.toggle("scroll-lock")},e.closeModal=function(){void 0!==e.props.trigger&&e.props.trigger.current.focus(),e.toggleScrollLock(),e.props.onClose()},e.onKeyDown=function(t){"Escape"===t.key&&e.closeModal()},e.onClickOutside=function(t){e.modalRef.current&&t.target instanceof HTMLElement&&e.modalRef.current.contains(t.target)||e.closeModal()},e.onSubmit=function(){e.toggleScrollLock(),e.props.onSubmit()},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.isShown&&(this.closeRef.current.focus(),this.toggleScrollLock())}},{key:"componentDidUpdate",value:function(){this.props.isShown&&this.toggleScrollLock()}},{key:"render",value:function(){return this.props.isShown?Object(h.jsx)(f,{onSubmit:this.onSubmit,modalRef:this.modalRef,closeRef:this.closeRef,text:this.props.text,className:this.props.className,closeModal:this.closeModal,onKeyDown:this.onKeyDown,onClickOutside:this.onClickOutside,children:this.props.children}):null}}]),a}(r.a.Component),O=a(15),k=a(14),x=a.n(k);var _,g="https://pebbletor.herokuapp.com",M="".concat(g,"/hills"),N="".concat(g,"/markers"),w=function(e,t){return x.a.get("".concat(M,"?page=").concat(e,"&limit=").concat(t))},C=function(e){return x.a.get("".concat(M,"/").concat(e))},y=function(e){return x.a.delete("".concat(M,"/").concat(e))},S=function(e){return x.a.post(N,e)},R=function(e){return x.a.delete("".concat(N,"/").concat(e))},A=function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return clearTimeout(a),new Promise((function(n){a=setTimeout((function(){return n(e.apply(void 0,r))}),t)}))}}((function(e,t){x.a.post("".concat(N,"/").concat(e),t)}),200),P={_id:"",name:"",description:"",author:"",createdAt:0,updatedAt:0},D=(a(171),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hills:[],hill:P,showModal:!1,nextPage:void 0,previousPage:void 0},e.deleteHill=function(t){y(t).then((function(){var a=e.state.hills.filter((function(e){return e._id!==t}));e.setState({hills:a})}))},e.selectHill=function(t){e.setState({hill:t}),e.setState({showModal:!0})},e.deselectHill=function(){e.setState({hill:P}),e.setState({showModal:!1})},e.fetchNextHills=function(t){w(t.page,t.limit).then((function(t){console.log(t.data),e.setState({hills:[].concat(Object(l.a)(e.state.hills),Object(l.a)(t.data.results)),nextPage:t.data.next,previousPage:t.data.previous})}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;w(1,4).then((function(t){e.setState({hills:[].concat(Object(l.a)(e.state.hills),Object(l.a)(t.data.results)),nextPage:t.data.next,previousPage:t.data.previous})}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"home",children:[Object(h.jsx)("div",{className:"home__header",children:Object(h.jsx)("h1",{className:"home__title",children:"Hill charts"})}),this.state.hills.map((function(t,a){return Object(h.jsxs)("div",{className:"card hill-card",children:[Object(h.jsx)(O.b,{to:"/hill/".concat(t._id),className:"hill-card__link",children:Object(h.jsx)("h2",{children:t.name})}),Object(h.jsxs)("p",{className:"hill-card__author",children:["by ",t.author]}),Object(h.jsx)("p",{className:"hill-card__description",children:t.description}),Object(h.jsxs)("div",{className:"hill-card__data",children:[Object(h.jsxs)("div",{className:"hill-card__dates",children:[Object(h.jsxs)("p",{className:"hill-card__date",children:["Created ",new Date(t.createdAt).toUTCString()]}),t.updatedAt&&Object(h.jsxs)("p",{className:"hill-card__date",children:["Last updated ",new Date(t.updatedAt).toUTCString()]})]}),Object(h.jsxs)("div",{className:"hill-card__buttons",children:[Object(h.jsx)(O.b,{to:"/edit/".concat(t._id),className:"hill-card__edit",children:Object(h.jsx)(j,{})}),Object(h.jsx)("button",{onClick:function(){return e.selectHill(t)},className:"hill-card__delete",children:Object(h.jsx)(m,{})})]})]})]},a)})),this.state.nextPage?Object(h.jsx)("div",{className:"home__next",children:Object(h.jsx)("button",{className:"load-more",onClick:function(){return e.fetchNextHills(e.state.nextPage)},children:Object(h.jsx)("p",{children:"Load More"})})}):null,Object(h.jsx)(v,{onSubmit:function(){return e.deleteHill(e.state.hill._id)},onClose:function(){return e.deselectHill()},isShown:this.state.showModal,text:{title:"Delete Hill",submit:"Delete"},className:"delete",children:Object(h.jsxs)("p",{children:["Are you sure you want to delete ",Object(h.jsx)("b",{children:this.state.hill.name}),"?"]})})]})}}]),a}(r.a.Component)),H=a(5),I=a(2),z=(a(174),function(){var e=Object(n.useState)(""),t=Object(H.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(H.a)(c,2),l=s[0],i=s[1],o=Object(n.useState)(""),d=Object(H.a)(o,2),u=d[0],m=d[1],j=Object(n.useState)(!1),b=Object(H.a)(j,2),p=b[0],f=b[1];return p?Object(h.jsx)(I.a,{to:"/"}):Object(h.jsxs)("div",{className:"create",children:[Object(h.jsx)("h1",{className:"create__title",children:"Create a hill chart"}),Object(h.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),(t={name:a,description:l,author:u},x.a.post(M,t)).then((function(){f(!0)}))},className:"card form",children:[Object(h.jsx)("label",{className:"form__label",children:"Hill chart name: "}),Object(h.jsx)("input",{type:"text",className:"form__input",required:!0,value:a,onChange:function(e){return r(e.target.value)}}),Object(h.jsx)("label",{className:"form__label",children:"Hill chart description: "}),Object(h.jsx)("textarea",{className:"form__input",required:!0,value:l,onChange:function(e){return i(e.target.value)}}),Object(h.jsx)("label",{className:"form__label",children:"Hill chart author: "}),Object(h.jsx)("input",{type:"text",className:"form__input",required:!0,value:u,onChange:function(e){return m(e.target.value)}}),Object(h.jsx)("span",{children:Object(h.jsx)("button",{className:"form__save",type:"submit",children:"Save"})})]})]})}),B=(a(175),function(e){var t=Object(n.useState)(P),a=Object(H.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),l=Object(H.a)(s,2),i=l[0],o=l[1],d=Object(n.useState)(""),u=Object(H.a)(d,2),m=u[0],j=u[1],b=Object(n.useState)(""),p=Object(H.a)(b,2),f=p[0],v=p[1],O=Object(n.useState)(!1),k=Object(H.a)(O,2),_=k[0],g=k[1];Object(n.useEffect)((function(){C(e.id).then((function(e){c(e.data),o(e.data.name),j(e.data.description),v(e.data.author)}))}),[e.id]);return _?Object(h.jsx)(I.a,{to:"/"}):Object(h.jsxs)("div",{className:"edit",children:[Object(h.jsx)("h1",{className:"edit__title",children:"Edit a hill chart"}),Object(h.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a,n,c={_id:r._id,name:i,description:m,author:f,createdAt:r.createdAt,updatedAt:r.updatedAt};(a=e.id,n=c,x.a.post("".concat(M,"/").concat(a),n)).then((function(){g(!0)}))},className:"card form",children:[Object(h.jsx)("label",{className:"form__label",children:"Hill chart name: "}),Object(h.jsx)("input",{type:"text",className:"form__input",required:!0,value:i,onChange:function(e){return o(e.target.value)}}),Object(h.jsx)("label",{className:"form__label",children:"Hill chart description: "}),Object(h.jsx)("textarea",{className:"form__input",required:!0,value:m,onChange:function(e){return j(e.target.value)}}),Object(h.jsx)("label",{className:"form__label",children:"Hill chart author: "}),Object(h.jsx)("input",{type:"text",className:"form__input",required:!0,value:f,onChange:function(e){return v(e.target.value)}}),Object(h.jsx)("span",{children:Object(h.jsx)("button",{className:"form__save",type:"submit",children:"Save"})})]})]})}),L=function(e){return Object(h.jsx)("svg",{className:"icon ".concat(e.className),fill:e.fill,viewBox:"0 0 512.001 512.001",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsx)("path",{d:"M470.218 159.659c-25.647-63.265-74.558-112.8-137.723-139.482C292.332 3.211 248.327-3.24 205.246 1.525c-18.368 2.031-32.9 15.609-36.161 33.787-3.253 18.138 5.634 35.881 22.115 44.151 31.723 15.917 56.581 42.823 69.997 75.762 30.531 74.958-5.539 160.805-80.403 191.367-32.893 13.427-69.478 14.45-103.019 2.88-17.422-6.01-36.334.042-47.056 15.061-10.702 14.991-10.283 34.805 1.04 49.306 26.682 34.168 62.01 61.167 102.167 78.08C165.931 505.399 199.648 512 233.149 512c57.539-.001 114.432-19.478 160.852-57.037 8.587-6.948 9.917-19.542 2.968-28.13-6.948-8.589-19.543-9.916-28.13-2.968-61.963 50.137-146.025 62.086-219.386 31.189-33.879-14.269-63.675-37.034-86.165-65.835-.396-.507-.544-.697-.011-1.443.567-.795.864-.691 1.454-.487 42.714 14.734 89.302 13.434 131.18-3.661 95.269-38.892 141.175-148.121 102.332-243.492-17.073-41.917-48.717-76.162-89.104-96.427-.598-.299-.845-.423-.682-1.335.176-.978.534-1.017 1.184-1.089 36.303-4.014 73.405 1.429 107.287 15.742 53.315 22.52 94.587 64.307 116.216 117.66 21.631 53.358 21.12 112.131-1.438 165.493a220.025 220.025 0 01-3.42 7.677c-4.687 10.004-.378 21.911 9.626 26.599 10.004 4.686 21.911.375 26.598-9.626a262.49 262.49 0 004.042-9.073c26.717-63.2 27.309-132.842 1.666-196.098z"})})},T=function(e){return Object(h.jsx)("svg",{className:"icon ".concat(e.className),fill:e.fill,viewBox:"0 0 302.4 302.4",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsx)("path",{d:"M204.8 97.6C191.2 84 172 75.2 151.2 75.2s-40 8.4-53.6 22.4c-13.6 13.6-22.4 32.8-22.4 53.6s8.8 40 22.4 53.6c13.6 13.6 32.8 22.4 53.6 22.4s40-8.4 53.6-22.4c13.6-13.6 22.4-32.8 22.4-53.6s-8.4-40-22.4-53.6zm-14.4 92.8c-10 10-24 16-39.2 16s-29.2-6-39.2-16-16-24-16-39.2 6-29.2 16-39.2 24-16 39.2-16 29.2 6 39.2 16 16 24 16 39.2-6 29.2-16 39.2zM292 140.8h-30.8c-5.6 0-10.4 4.8-10.4 10.4 0 5.6 4.8 10.4 10.4 10.4H292c5.6 0 10.4-4.8 10.4-10.4 0-5.6-4.8-10.4-10.4-10.4zM151.2 250.8c-5.6 0-10.4 4.8-10.4 10.4V292c0 5.6 4.8 10.4 10.4 10.4 5.6 0 10.4-4.8 10.4-10.4v-30.8c0-5.6-4.8-10.4-10.4-10.4zM258 243.6l-22-22c-3.6-4-10.4-4-14.4 0s-4 10.4 0 14.4l22 22c4 4 10.4 4 14.4 0s4-10.4 0-14.4zM151.2 0c-5.6 0-10.4 4.8-10.4 10.4v30.8c0 5.6 4.8 10.4 10.4 10.4 5.6 0 10.4-4.8 10.4-10.4V10.4c0-5.6-4.8-10.4-10.4-10.4zM258.4 44.4c-4-4-10.4-4-14.4 0l-22 22c-4 4-4 10.4 0 14.4 3.6 4 10.4 4 14.4 0l22-22c4-4 4-10.4 0-14.4zM41.2 140.8H10.4c-5.6 0-10.4 4.8-10.4 10.4s4.4 10.4 10.4 10.4h30.8c5.6 0 10.4-4.8 10.4-10.4 0-5.6-4.8-10.4-10.4-10.4zM80.4 221.6c-3.6-4-10.4-4-14.4 0l-22 22c-4 4-4 10.4 0 14.4s10.4 4 14.4 0l22-22c4-4 4-10.4 0-14.4zM80.4 66.4l-22-22c-4-4-10.4-4-14.4 0s-4 10.4 0 14.4l22 22c4 4 10.4 4 14.4 0s4-10.4 0-14.4z"})})},E=(a(176),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={checked:!0},e.setTheme=function(t){"light-theme"===t?e.setState({checked:!1}):e.setState({checked:!0}),localStorage.setItem("theme",t),document.querySelector("body").className=t},e.onClick=function(){var t=!e.state.checked?"dark-theme":"light-theme";e.setTheme(t)},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){"dark-theme"===localStorage.getItem("theme")?this.setTheme("dark-theme"):this.setTheme("light-theme")}},{key:"render",value:function(){return this.state.checked?Object(h.jsx)("div",{className:"theme-switch",children:Object(h.jsx)("button",{className:"theme-switch__button",onClick:this.onClick,children:Object(h.jsx)(T,{className:"theme-switch__icon--sun"})})}):Object(h.jsx)("div",{className:"theme-switch",children:Object(h.jsx)("button",{className:"theme-switch__button",onClick:this.onClick,children:Object(h.jsx)(L,{className:"theme-switch__icon"})})})}}]),a}(r.a.Component)),q=a.p+"static/media/Logo.a90d934a.png",V=(a(177),function(){return Object(h.jsxs)("div",{className:"brand",children:[Object(h.jsx)("img",{className:"brand__logo",src:q,alt:"PebbleTor logo"}),Object(h.jsx)("p",{className:"brand__text",children:"PebbleTor"})]})}),F=(a(178),function(){return Object(h.jsxs)("nav",{className:"navbar",children:[Object(h.jsx)(O.b,{to:"/",className:"navbar__brand",children:Object(h.jsx)(V,{})}),Object(h.jsxs)("ul",{className:"navbar__nav",children:[Object(h.jsx)("li",{className:"navbar__item",children:Object(h.jsx)(E,{})}),Object(h.jsx)("li",{className:"navbar__item",children:Object(h.jsx)(O.b,{to:"/",className:"navbar__link",children:"Hill Charts"})}),Object(h.jsx)("li",{className:"navbar__item",children:Object(h.jsx)(O.b,{to:"/create",className:"navbar__link create",children:"Create"})})]})]})}),K=a(35),U=a(28);!function(e){e.Inactive="inactive",e.Active="active",e.Complete="complete"}(_||(_={}));var G=a(12),J=function e(){Object(i.a)(this,e)};J.getPointAtPercentage=function(e,t){var a=e.getTotalLength()/100*t,n=e.getPointAtLength(a);return[n.x,n.y]},J.getClosestPoint=function(e,t){for(var a,n,r,c,s,l=e.getTotalLength(),i=8,o=0,d=1/0,u=0;u<=l;u+=i)(s=v(c=e.getPointAtLength(u)))<d&&(r=c,o=u,d=s);for(i/=2;i>.5;){var h,m=void 0,j=void 0,b=void 0,p=void 0,f=void 0;(h=o-i)>=0&&(p=v(m=e.getPointAtLength(h)))<d?(r=m,o=h,d=p):(b=o+i)<=l&&(f=v(j=e.getPointAtLength(b)))<d?(r=j,o=b,d=f):i/=2}return r=[null===(a=r)||void 0===a?void 0:a.x,null===(n=r)||void 0===n?void 0:n.y];function v(e){var a=e.x-t[0],n=e.y-t[1];return a*a+n*n}},J.getStatusIndex=function(e){return{inactive:e.markers.filter((function(e){return e.status===_.Inactive})).findIndex((function(t){return t._id===e.marker._id})),complete:e.markers.filter((function(e){return e.status===_.Complete})).findIndex((function(t){return t._id===e.marker._id}))}},J.getPosition=function(e,t){var a=e.marker.currentPos;return 0===a.length?e.marker.isNewPercentage&&(a=J.getPointAtPercentage(e.line,e.marker.percentage)):t.inactive>-1?a=[110,50+30*t.inactive]:t.complete>-1&&(a=[1e3,50+30*t.complete]),a},J.onDrag=function(e,t){if(void 0!==e.selectedMarker&&e.marker._id===e.selectedMarker){var a=e.svg,n=G.d(t,a),r=J.getClosestPoint(e.line,n),c=Object(U.a)({},e.marker);c.currentPos=r,r[0]<101?c.status=_.Inactive:r[0]>1099?c.status=_.Complete:c.status=_.Active,e.updateMarker(c)}},J.onTouch=function(e,t){if(void 0!==e.selectedMarker&&e.marker._id===e.selectedMarker){var a=e.svg,n=G.e(t,a)[0],r=J.getClosestPoint(e.line,n),c=Object(U.a)({},e.marker);c.currentPos=r,r[0]<101?c.status=_.Inactive:r[0]>1099?c.status=_.Complete:c.status=_.Active,e.updateMarker(c)}},J.setupMarker=function(e,t,a,n,r,c){var s=G.b().on("drag",r).touchable(!1);t.on("touchmove",c),t.attr("transform","translate("+n+")"),t.append("circle").attr("r",10).style("fill",e.marker.colour).call(s),e.marker._id===e.selectedMarker&&t.append("circle").attr("r",12).attr("class","selected-marker").style("fill","none").style("stroke-width",2),a.inactive>-1||a.complete>-1?t.append("text").attr("transform","translate("+[20,5]+")").text(e.marker.name):t.append("text").attr("transform","translate("+[-10,-20]+")").text(e.marker.name)};a(180);var W,Y,Q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).markerRef=r.a.createRef(),n.drag=function(e){return J.onDrag(n.props,e)},n.touch=function(e){return J.onTouch(n.props,e)},n.click=function(){return n.props.selectMarker(n.props.marker._id)},n.drag=n.drag.bind(Object(K.a)(n)),n.click=n.click.bind(Object(K.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=J.getStatusIndex(this.props),t=J.getPosition(this.props,e),a=Object(G.f)(this.markerRef.current);a.on("click",this.click),J.setupMarker(this.props,a,e,t,this.drag,this.touch)}},{key:"componentDidUpdate",value:function(){var e=J.getStatusIndex(this.props),t=J.getPosition(this.props,e),a=Object(G.f)(this.markerRef.current);this.props.marker.currentPos=t,this.props.marker.isNewPercentage=!1,a.selectAll("text").remove(),a.selectAll("circle").remove(),J.setupMarker(this.props,a,e,t,this.drag,this.touch)}},{key:"render",value:function(){return Object(h.jsx)("g",{ref:this.markerRef})}}]),a}(r.a.Component),X=(a(181),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={svg:null,line:null},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=G.c().curve(G.a),t=G.f("#hill__svg");t.on("click",this.props.deselectMarker);var a=t.append("path").datum(this.props.points).attr("d",e).attr("id","hill__path");t.append("path").datum([[600,400],[600,120]]).attr("d",G.c()).attr("class","hill__line"),t.append("text").attr("transform","translate("+[100,20]+")").attr("class","hill__text").text("Inactive"),t.append("text").attr("transform","translate("+[990,20]+")").attr("class","hill__text").text("Complete"),this.setState({svg:t.node(),line:a.node()})}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"hill",children:[Object(h.jsx)("h1",{className:"hill__title",children:this.props.hill.name}),Object(h.jsx)("p",{className:"hill__subtitle",children:this.props.hill.description}),Object(h.jsx)("svg",{id:"hill__svg",width:this.props.size.width,height:this.props.size.height,children:this.props.markers.map((function(t){return Object(h.jsx)(Q,{svg:e.state.svg,line:e.state.line,marker:t,markers:e.props.markers,selectedMarker:e.props.selectedMarker,selectMarker:e.props.selectMarker,updateMarker:e.props.updateMarker},t._id)}))})]})}}]),a}(r.a.Component)),Z=function(e){return Object(h.jsxs)("svg",{className:"icon ".concat(e.className),fill:e.fill,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[Object(h.jsx)("path",{d:"M14.25 0H2.75C1.23 0 0 1.23 0 2.75v15.5C0 19.77 1.23 21 2.75 21h6.59a8.731 8.731 0 01-.84-3.75c0-1.15.22-2.25.63-3.26-.04.01-.08.01-.13.01H4c-.55 0-1-.45-1-1s.45-1 1-1h5c.38 0 .72.22.88.54A8.827 8.827 0 0112.36 10H4c-.55 0-1-.45-1-1s.45-1 1-1h9c.55 0 1 .45 1 1 0 .05 0 .09-.01.13.93-.38 1.95-.6 3.01-.62V2.75C17 1.23 15.77 0 14.25 0zM8 6H4c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1z"}),Object(h.jsx)("path",{d:"M17.25 10.5c-3.722 0-6.75 3.028-6.75 6.75S13.528 24 17.25 24 24 20.972 24 17.25s-3.028-6.75-6.75-6.75zM20 18.25h-1.75V20a1 1 0 01-2 0v-1.75H14.5a1 1 0 010-2h1.75V14.5a1 1 0 012 0v1.75H20a1 1 0 010 2z"})]})};!function(e){e.Gray="gray",e.Yellow="yellow",e.Orange="orange",e.Maroon="maroon",e.Red="red",e.Purple="purple",e.Fuchsia="fuchsia",e.Pink="pink",e.Green="green",e.Lime="lime",e.Olive="olive",e.Navy="navy",e.Blue="blue",e.Teal="teal",e.Aqua="aqua"}(W||(W={})),function(e){e.Add="add",e.Edit="edit",e.Delete="delete",e.None=""}(Y||(Y={}));a(182);var $=function(e){var t,a,r,c,s=Object(n.useState)((null===(t=e.marker)||void 0===t?void 0:t.name)||""),l=Object(H.a)(s,2),i=l[0],o=l[1],d=Object(n.useState)((null===(a=e.marker)||void 0===a?void 0:a.percentage)||"50"),u=Object(H.a)(d,2),m=u[0],j=u[1],b=Object(n.useState)((null===(r=e.marker)||void 0===r?void 0:r.colour)||W.Gray),p=Object(H.a)(b,2),f=p[0],O=p[1],k=Object(n.useState)((null===(c=e.marker)||void 0===c?void 0:c.status)||_.Active),x=Object(H.a)(k,2),g=x[0],M=x[1];return Object(h.jsx)(v,{onSubmit:function(){return function(){var t,a,n={hillId:e.hillId,name:i,percentage:parseInt(m.toString()),isNewPercentage:m!==(null===(t=e.marker)||void 0===t?void 0:t.percentage)||(e.marker.status===_.Complete||e.marker.status===_.Inactive)&&g===_.Active,currentPos:(null===(a=e.marker)||void 0===a?void 0:a.currentPos)||[],colour:f,status:g};if(void 0!==e.marker){var r=Object(U.a)(Object(U.a)({},n),{},{_id:e.marker._id,createdAt:e.marker.createdAt,updatedAt:e.marker.updatedAt});e.update(r)}else e.add(n);e.selectModal(Y.None)}()},onClose:function(){return e.selectModal(Y.None)},isShown:!0,trigger:e.buttonRef,text:{title:e.title,submit:"Save"},children:Object(h.jsxs)("div",{className:"marker-modal__content",children:[Object(h.jsx)("label",{className:"marker-modal__label",children:"Marker name: "}),Object(h.jsx)("input",{type:"text",className:"marker-modal__input",required:!0,value:i,onChange:function(e){return o(e.target.value)}}),Object(h.jsx)("label",{className:"marker-modal__label",children:"Marker percentage: "}),Object(h.jsx)("input",{type:"text",className:"marker-modal__input",required:!0,value:m,onChange:function(e){return j(e.target.value)}}),Object(h.jsx)("label",{className:"marker-modal__label",children:"Marker colour: "}),Object(h.jsx)("select",{className:"marker-modal__input",required:!0,value:f,onChange:function(e){return O(e.target.value)},children:Object.keys(W).map((function(e){return Object(h.jsx)("option",{value:W[e],style:{color:W[e]},children:e})}))}),Object(h.jsx)("label",{className:"marker-modal__label",children:"Marker status: "}),Object(h.jsx)("select",{className:"marker-modal__input",required:!0,value:g,onChange:function(e){return M(e.target.value)},children:Object.keys(_).map((function(e){return Object(h.jsx)("option",{value:_[e],children:e})}))})]})})},ee=(a(183),function(e){switch(e.modal){case Y.Add:return Object(h.jsx)($,{title:"Add Marker",hillId:e.hillId,buttonRef:e.addButtonRef,add:e.add,update:e.update,selectModal:e.selectModal});case Y.Edit:return Object(h.jsx)($,{title:"Edit Marker",hillId:e.hillId,buttonRef:e.updateButtonRef,add:e.add,update:e.update,marker:e.marker,selectModal:e.selectModal});case Y.Delete:return Object(h.jsx)(v,{onSubmit:function(){return e.delete(e.marker._id)},onClose:function(){return e.selectModal(Y.None)},isShown:!0,trigger:e.deleteButtonRef,text:{title:"Delete Marker",submit:"Delete"},className:"delete",children:Object(h.jsxs)("p",{children:["Are you sure you want to delete ",Object(h.jsx)("b",{children:e.marker.name}),"?"]})});default:return null}}),te=(a(184),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).dropdownContentRef=r.a.createRef(),e.dropdownButtonRef=r.a.createRef(),e.addButtonRef=r.a.createRef(),e.editButtonRef=r.a.createRef(),e.deleteButtonRef=r.a.createRef(),e.state={activeModal:Y.None},e.selectModal=function(t){return e.setState({activeModal:t})},e.openEditModal=function(t){e.toggleDropdown(),e.props.selectMarker(t),e.selectModal(Y.Edit)},e.toggleDropdown=function(){var t,a=null===(t=e.dropdownContentRef.current)||void 0===t?void 0:t.style.display;e.dropdownContentRef.current.style.display="none"===a?"flex":"none"},e.hideDropdown=function(t){var a,n;(null===(a=e.dropdownContentRef.current)||void 0===a?void 0:a.contains(t.target))||(null===(n=e.dropdownContentRef.current)||void 0===n?void 0:n.contains(t.target))||(e.dropdownContentRef.current.style.display="none")},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.hideDropdown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.hideDropdown)}},{key:"render",value:function(){var e=this,t=!this.props.markers.some((function(t){return void 0!==e.props.selectedMarker&&t._id===e.props.selectedMarker})),a=0===this.props.markers.length,n=t&&!a?"dropdown__button disabled":"dropdown__button";return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"toolbar",children:[Object(h.jsxs)("button",{className:"toolbar__button",ref:this.addButtonRef,onClick:function(){return e.selectModal(Y.Add)},children:[Object(h.jsx)(Z,{className:"toolbar__icon"})," Add"]}),Object(h.jsxs)("div",{className:"toolbar__edit",children:[Object(h.jsxs)("button",{className:"toolbar__edit-button",ref:this.editButtonRef,disabled:t,onClick:function(){return e.selectModal(Y.Edit)},children:[Object(h.jsx)(j,{className:"toolbar__icon"}),Object(h.jsx)("span",{children:"Edit"})]}),Object(h.jsxs)("div",{className:"dropdown",children:[Object(h.jsx)("button",{className:n,disabled:a,ref:this.dropdownButtonRef,onClick:function(){return e.toggleDropdown()},children:"\u25bc"}),Object(h.jsx)("div",{className:"dropdown__content",style:{display:"none"},ref:this.dropdownContentRef,children:this.props.markers.map((function(t,a){return Object(h.jsxs)("button",{className:"dropdown__item",onClick:function(){return e.openEditModal(t._id)},children:[Object(h.jsx)("div",{style:{backgroundColor:t.colour},className:"dropdown__marker"}),t.name]},a)}))})]})]}),Object(h.jsxs)("button",{className:"toolbar__button delete",ref:this.deleteButtonRef,disabled:t,onClick:function(){return e.selectModal(Y.Delete)},children:[Object(h.jsx)(m,{className:"toolbar__icon"}),Object(h.jsx)("span",{children:"Delete"})]})]}),Object(h.jsx)(ee,{modal:this.state.activeModal,hillId:this.props.hillId,add:this.props.add,addButtonRef:this.addButtonRef,update:this.props.update,updateButtonRef:this.editButtonRef,delete:this.props.delete,deleteButtonRef:this.deleteButtonRef,marker:this.props.markers.find((function(t){return t._id===e.props.selectedMarker})),selectModal:this.selectModal})]})}}]),a}(r.a.Component)),ae=(a(185),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hill:P,markers:[],selectedMarker:"",isMarkerClick:!1},e.update=function(){return e.props.socket.emit("update-hill-markers",{room:e.props.id,markers:e.state.markers})},e.selectMarker=function(t){return e.setState({isMarkerClick:!0,selectedMarker:t})},e.deselectMarker=function(){e.state.isMarkerClick||e.setState({selectedMarker:""}),e.setState({isMarkerClick:!1})},e.addMarker=function(t){S(t).then((function(t){e.setState({markers:[].concat(Object(l.a)(e.state.markers),[t.data])},(function(){e.update()}))}))},e.updateMarker=function(t){var a=Object(l.a)(e.state.markers),n=a.findIndex((function(e){return e._id===t._id}));a[n]=t,e.setState({markers:a},(function(){e.update(),A(t._id,t)}))},e.deleteMarker=function(t){var a=Object(l.a)(e.state.markers),n=a.findIndex((function(e){return e._id===t}));a.splice(n,1),e.setState({markers:a},(function(){e.update(),R(t)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;this.props.socket.emit("hill-connect",this.props.id),this.props.socket.on("update-hill-markers",(function(e){return t.setState({markers:e})})),C(this.props.id).then((function(e){return t.setState({hill:e.data})})),(e=this.props.id,x.a.get("".concat(N,"/hill/").concat(e))).then((function(e){return t.setState({markers:e.data})}))}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(X,{hill:this.state.hill,markers:this.state.markers,selectedMarker:this.state.selectedMarker,updateMarker:this.updateMarker,selectMarker:this.selectMarker,deselectMarker:this.deselectMarker,size:{width:1200,height:450},points:[[100,400],[300,350],[600,120],[900,350],[1100,400]]}),Object(h.jsx)(te,{markers:this.state.markers,selectedMarker:this.state.selectedMarker,hillId:this.props.id,selectMarker:this.selectMarker,add:this.addMarker,update:this.updateMarker,delete:this.deleteMarker})]})}}]),a}(r.a.Component)),ne=a(89),re=(a(215),Object(ne.io)("/"));var ce=function(){return Object(h.jsx)(O.a,{children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(F,{}),Object(h.jsx)(I.d,{children:Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(I.b,{exact:!0,path:"/",children:Object(h.jsx)(D,{})}),Object(h.jsx)(I.b,{path:"/edit/:id",render:function(e){return Object(h.jsx)(B,{id:e.match.params.id})}}),Object(h.jsx)(I.b,{path:"/create",children:Object(h.jsx)(z,{})}),Object(h.jsx)(I.b,{path:"/hill/:id",render:function(e){return Object(h.jsx)(ae,{id:e.match.params.id,socket:re})}})]})})]})})},se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,219)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};a(216);s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(ce,{})}),document.getElementById("root")),se()},30:function(e,t,a){}},[[217,1,2]]]);
//# sourceMappingURL=main.b9d21de3.chunk.js.map